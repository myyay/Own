<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;6.&nbsp;&#25903;&#25345;&#30340;&#22522;&#30784;&#35774;&#26045;</title><link rel="stylesheet" href="html.css" tppabs="http://www.family168.com/tutorial/springsecurity/html/css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"><link rel="start" href="springsecurity.html" title="Spring Security"><link rel="up" href="overall-architecture.html" title="Part&nbsp;II.&nbsp;&#24635;&#20307;&#32467;&#26500;"><link rel="prev" href="technical-overview.html" title="Chapter&nbsp;5.&nbsp;&#25216;&#26415;&#27010;&#36848;"><link rel="next" href="channel-security.html" title="Chapter&nbsp;7.&nbsp;&#20449;&#36947;&#23433;&#20840;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="background-color:white;border:none;height:73px;border:1px solid black;"><a style="border:none;" href="javascript:if(confirm('http://static.springframework.org/spring-ws/site/  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://static.springframework.org/spring-ws/site/'" tppabs="http://static.springframework.org/spring-ws/site/" title="The Spring Framework - Spring Web Services"><img style="border:none;" src="xdev-spring_logo.jpg" tppabs="http://www.family168.com/tutorial/springsecurity/html/images/xdev-spring_logo.jpg"></a><a style="border:none;" href="javascript:if(confirm('http://www.springsource.com/  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://www.springsource.com/'" tppabs="http://www.springsource.com/" title="SpringSource"><img style="border:none;position:absolute;padding-top:5px;right:42px;" src="s2-banner-rhs.png" tppabs="http://www.family168.com/tutorial/springsecurity/html/images/s2-banner-rhs.png"></a></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="supporting-infrastructure"></a>&#25903;&#25345;&#30340;&#22522;&#30784;&#35774;&#26045;</h1></div></div></div>

  


  <p>&#36825;&#31456;&#37324;&#35752;&#35770;&#19968;&#20123;Spring Security&#20013;&#29992;&#21040;&#30340;&#22522;&#30784;&#35774;&#26045;&#12290;
  &#22914;&#26524;&#36825;&#20010;&#21151;&#33021;&#36319;&#23433;&#20840;&#27809;&#26377;&#30452;&#25509;&#20851;&#31995;&#65292;&#20294;&#26159;&#36824;&#26159;&#21253;&#21547;&#22312;Spring Security&#20013;&#20102;&#65292;&#25105;&#20204;&#23601;&#22312;&#36825;&#31456;&#37324;&#35752;&#35770;&#23427;&#12290;</p>

  <div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="localization"></a>6.1.&nbsp;&#22269;&#38469;&#21270;</h2></div></div></div>
    
    <p>Spring Security&#25903;&#25345;&#24322;&#24120;&#20449;&#24687;&#30340;&#22269;&#38469;&#21270;&#65292;&#26368;&#32456;&#29992;&#25143;&#20250;&#24456;&#21916;&#27426;&#36825;&#28857;&#12290;
    &#22914;&#26524;&#20320;&#30340;&#31243;&#24207;&#26159;&#20026;&#33521;&#35821;&#29992;&#25143;&#35774;&#35745;&#30340;&#65292;&#20320;&#19981;&#38656;&#35201;&#20570;&#20219;&#20309;&#20107;&#65292;&#22240;&#20026;&#40664;&#35748;&#24773;&#20917;&#19979;&#25152;&#26377;&#30340;Spring Security&#28040;&#24687;&#37117;&#26159;&#33521;&#25991;&#30340;&#12290;
    &#22914;&#26524;&#20320;&#38656;&#35201;&#25903;&#25345;&#20854;&#20182;&#35821;&#35328;&#65292;&#20320;&#25152;&#38656;&#35201;&#20570;&#30340;&#23601;&#26159;&#30475;&#30475;&#36825;&#33410;&#20869;&#23481;&#12290;</p>

    <p>&#25152;&#26377;&#30340;&#24322;&#24120;&#20449;&#24687;&#37117;&#26159;&#21487;&#20197;&#26412;&#22320;&#21270;&#30340;&#65292;&#21253;&#25324;&#39564;&#35777;&#22833;&#36133;&#21644;&#35775;&#38382;&#34987;&#25298;&#32477;&#65288;&#39564;&#35777;&#22833;&#36133;&#65289;&#20449;&#24687;&#12290;
    &#24320;&#21457;&#32773;&#21644;&#31995;&#32479;&#21457;&#24067;&#32773;&#20851;&#27880;&#30340;&#24322;&#24120;&#21644;&#26085;&#24535;&#20449;&#24687;&#65288;&#21253;&#25324;&#19981;&#27491;&#30830;&#30340;&#23646;&#24615;&#65292;&#25509;&#21475;&#32852;&#31995;&#20998;&#38548;&#65292;&#20351;&#29992;&#38169;&#35823;&#30340;&#26500;&#36896;&#22120;&#65292;&#24320;&#22987;&#39564;&#35777;&#20876;&#20070;&#65292;&#26085;&#24535;&#35843;&#35797;&#31561;&#32423;&#65289;&#31561;&#31561;&#65292;&#19981;&#33021;&#36827;&#34892;&#26412;&#22320;&#21270;&#65292;&#32780;&#26159;&#20351;&#29992;&#33521;&#25991;&#30452;&#25509;&#30828;&#32534;&#30721;&#21040;&#20102;Spring Security&#20195;&#30721;&#37324;&#12290;</p>

    <p>&#25171;&#24320;<code class="literal">spring-security-core-xx.jar</code>&#65292;&#20320;&#21487;&#20197;&#25214;&#21040;<code class="literal">org.springframework.security</code>&#21253;&#65292;&#37324;&#38754;&#21253;&#21547;&#20102;&#19968;&#20010;<code class="literal">messages.properties</code>&#25991;&#20214;&#12290;
    &#20320;&#30340;<code class="literal">ApplicationContext</code>&#24212;&#29992;&#24212;&#35813;&#24341;&#29992;&#36825;&#20010;&#25991;&#20214;&#65292;&#22240;&#20026;Spring Security&#23454;&#29616;&#20102;Spring&#30340;<code class="literal">MessageSourceAware</code>&#25509;&#21475;&#65292;&#24076;&#26395;&#36825;&#20123;&#28040;&#24687;&#20250;&#22312;application context&#21551;&#21160;&#30340;&#26102;&#20505;&#27880;&#20837;&#21040;&#31243;&#24207;&#20013;&#12290;
    &#36890;&#24120;&#65292;&#20320;&#38656;&#35201;&#20570;&#30340;&#23601;&#26159;&#65292;&#22312;&#20320;&#30340;application context &#37324;&#27880;&#20876;&#19968;&#20010;bean&#65292;&#26469;&#24341;&#29992;&#36825;&#20123;&#20449;&#24687;&#65292;&#27604;&#22914;&#20687;&#19979;&#38754;&#36825;&#26679;&#65306;</p>

    <pre class="programlisting">
&lt;bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource"&gt;
  &lt;property name="basename" value="org/springframework/security/messages"/&gt;
&lt;/bean&gt;
</pre>

    <p>&#36825;&#20010;<code class="literal">messages.properties</code>&#20351;&#29992;&#20102;&#26631;&#20934;&#30340;&#36164;&#28304;&#26463;&#21629;&#21517;&#26041;&#24335;&#65292;&#20026;Spring Security&#25552;&#20379;&#20102;&#40664;&#35748;&#30340;&#35821;&#35328;&#25903;&#25345;&#12290;
    &#40664;&#35748;&#30340;&#35821;&#35328;&#26159;&#33521;&#25991;&#12290;
    &#22914;&#26524;&#20320;&#27809;&#26377;&#27880;&#20876;&#28040;&#24687;&#28304;&#65292;Spring Security&#20381;&#28982;&#21487;&#20197;&#27491;&#24120;&#24037;&#20316;&#65292;&#20294;&#26159;&#20351;&#29992;&#30340;&#26159;&#30828;&#32534;&#30721;&#30340;&#33521;&#25991;&#20449;&#24687;&#29256;&#26412;&#12290;</p>

    <p>&#22914;&#26524;&#20320;&#24819;&#33258;&#23450;&#20041;<code class="literal">messages.properties</code>&#25991;&#20214;&#65292;&#25110;&#25903;&#25345;&#20854;&#20182;&#35821;&#35328;&#65292;&#20320;&#24212;&#35813;&#22797;&#21046;&#36825;&#20010;&#25991;&#20214;&#65292;&#25913;&#25104;&#23545;&#24212;&#30340;&#25991;&#20214;&#21517;&#65292;&#24182;&#25226;&#23427;&#27880;&#20876;&#21040;&#19978;&#38754;&#30340;bean&#23450;&#20041;&#20013;&#12290;
    &#25991;&#20214;&#37324;&#30340;&#20851;&#38190;&#20449;&#24687;&#24182;&#19981;&#22810;&#65292;&#26412;&#22320;&#21270;&#24212;&#35813;&#19981;&#26159;&#19968;&#20010;&#24456;&#22823;&#30340;&#20219;&#21153;&#12290;
    &#22914;&#26524;&#20320;&#23545;&#36825;&#20010;&#25991;&#20214;&#36827;&#34892;&#20102;&#26412;&#22320;&#21270;&#65292;&#35831;&#32771;&#34385;&#25226;&#20320;&#30340;&#24037;&#20316;&#19982;&#31038;&#21306;&#20998;&#20139;&#65292;&#35760;&#24405;&#19968;&#20010;JIRA&#20219;&#21153;&#65292;&#25226;&#20320;&#30340;&#26412;&#22320;&#21270;&#29256;&#26412;<code class="literal">messages.properties</code>&#20197;&#38468;&#20214;&#24418;&#24335;&#21457;&#36865;&#19978;&#26469;&#12290;</p>

    <p>&#22260;&#32469;&#26412;&#22320;&#21270;&#36827;&#34892;&#35752;&#35770;&#65292;&#23601;&#35201;&#25552;&#21040;Spring&#37324;&#30340;<code class="literal">ThreadLocal</code>&#65292;<code class="literal">org.springframework.context.i18n.LocaleContextHolder</code>&#12290;
    &#20320;&#24212;&#35813;&#36890;&#36807;<code class="literal">LocaleContextHolder</code>&#65292;&#26469;&#34920;&#29616;&#27599;&#20010;&#29992;&#25143;&#24819;&#35201;&#30340;<code class="literal">Locale</code>.
    Spring Security&#23581;&#35797;&#20174;&#20449;&#24687;&#28304;&#20013;&#23450;&#20301;&#20449;&#24687;&#65292;&#20351;&#29992;&#20174;<code class="literal">ThreadLocal</code>&#37324;&#20013;&#33719;&#24471;&#30340;<code class="literal">Locale</code>&#12290;
    &#35831;&#21442;&#32771;Spring&#25991;&#26723;&#33719;&#24471;&#20351;&#29992;<code class="literal">LocaleContextHolder</code>&#30340;&#26356;&#22810;&#20449;&#24687;&#65292;&#21487;&#20197;&#20351;&#29992;&#19968;&#20123;&#24110;&#21161;&#31867;&#36827;&#34892;&#33258;&#21160;&#35774;&#32622;&#65288;&#27604;&#22914;<code class="literal">AcceptHeaderLocaleResolver</code>,
    <code class="literal">CookieLocaleResolver</code>,
    <code class="literal">FixedLocaleResolver</code>,
    <code class="literal">SessionLocaleResolver</code>&#31561;&#31561;&#65289;&#12290;</p>
  </div>

  <div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="filters"></a>6.2.&nbsp;&#36807;&#28388;&#22120;</h2></div></div></div>
    

    <p>Spring Security&#29992;&#21040;&#20102;&#24456;&#22810;&#36807;&#28388;&#22120;&#65292;&#21442;&#32771;&#25351;&#21335;&#30340;&#21518;&#32493;&#37096;&#20998;&#20250;&#19968;&#19968;&#25552;&#21040;&#12290;
    &#22914;&#26524;&#20320;&#20351;&#29992;&#20102;<a href="ns-config.html" tppabs="http://www.family168.com/tutorial/springsecurity/html/ns-config.html" title="Chapter&nbsp;2.&nbsp;Security&#21629;&#21517;&#31354;&#38388;&#37197;&#32622;">&#21629;&#21517;&#31354;&#38388;&#37197;&#32622;</a>&#65292;&#20320;&#23601;&#19981;&#29992;&#32463;&#24120;&#21435;&#26126;&#30830;&#25351;&#23450;&#36807;&#28388;&#22120;bean&#12290;
    &#26377;&#20960;&#31181;&#21487;&#33021;&#24773;&#20917;&#65292;&#20320;&#24076;&#26395;&#23545;&#23433;&#20840;&#36807;&#28388;&#22120;&#38142;&#36827;&#34892;&#23436;&#20840;&#25511;&#21046;&#65292;&#25110;&#35768;&#22240;&#20026;&#20320;&#20351;&#29992;&#30340;&#21151;&#33021;&#27809;&#27861;&#20351;&#29992;&#21629;&#21517;&#31354;&#38388;&#36827;&#34892;&#25903;&#25345;&#65292;&#25110;&#32773;&#20320;&#20351;&#29992;&#20102;&#33258;&#24049;&#33258;&#23450;&#20041;&#29256;&#26412;&#30340;&#31867;&#12290;</p>
    <p>&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#20320;&#21487;&#20197;&#36873;&#25321;&#21521;&#20320;&#30340;web&#24212;&#29992;&#25104;&#31435;&#37324;&#28155;&#21152;&#21738;&#20123;&#36807;&#28388;&#22120;&#65292;&#36825;&#37324;&#20320;&#21487;&#20197;&#20351;&#29992;Spring&#30340;<code class="literal">DelegatingFilterProxy</code>&#25110;
    <code class="literal">FilterChainProxy</code>&#12290;&#25105;&#20204;&#20250;&#22312;&#19979;&#38754;&#20171;&#32461;&#23427;&#20204;&#20004;&#20010;&#12290;</p>

    <p>&#22312;&#20351;&#29992;<code class="literal">DelegatingFilterProxy</code>&#30340;&#26102;&#20505;&#65292;&#20320;&#20250;&#30475;&#21040;web.xml&#37324;&#36825;&#26679;&#30340;&#20869;&#23481;&#65306;

        </p><pre class="programlisting">
    &lt;filter&gt;
        &lt;filter-name&gt;myFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;
    &lt;/filter&gt;

    &lt;filter-mapping&gt;
      &lt;filter-name&gt;myFilter&lt;/filter-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;
        </pre><p>

        &#27880;&#24847;&#36825;&#20010;&#36807;&#28388;&#22120;&#20854;&#23454;&#26159;&#19968;&#20010;<code class="literal">DelegatingFilterProxy</code>&#65292;&#36825;&#20010;&#36807;&#28388;&#22120;&#37324;&#27809;&#26377;&#23454;&#29616;&#36807;&#28388;&#22120;&#30340;&#20219;&#20309;&#36923;&#36753;&#12290;
        <code class="literal">DelegatingFilterProxy</code>&#20570;&#30340;&#20107;&#24773;&#26159;&#20195;&#29702;<code class="literal">Filter</code>&#30340;&#26041;&#27861;&#65292;&#20174;application context&#37324;&#33719;&#24471;bean&#12290;
        &#36825;&#35753;bean&#21487;&#20197;&#33719;&#24471;spring web application context&#30340;&#29983;&#21629;&#21608;&#26399;&#25903;&#25345;&#65292;&#20351;&#37197;&#32622;&#36739;&#20026;&#36731;&#20415;&#12290;
        bean&#24517;&#39035;&#23454;&#29616;<code class="literal">javax.servlet.Filter</code>&#25509;&#21475;&#65292;&#23427;&#24517;&#39035;&#21644;<code class="literal">filter-name</code>&#37324;&#23450;&#20041;&#30340;&#21517;&#31216;&#26159;&#19968;&#26679;&#30340;&#12290;</p>

    <p>&#22312;&#29983;&#21629;&#21608;&#26399;&#30340;&#38382;&#39064;&#19978;&#65292;&#35201;&#32771;&#34385;&#22312;IoC&#23481;&#22120;&#37324;&#32780;&#19981;&#26159;&#22312;servlet&#23481;&#22120;&#37324;&#31649;&#29702;<code class="literal">Filter</code>&#12290;
    &#20855;&#20307;&#26469;&#35828;&#65292;&#21040;&#24213;&#26159;&#21738;&#20010;&#23481;&#22120;&#24212;&#35813;&#35843;&#29992;<code class="literal">Filter</code>&#30340;&#8220;&#21551;&#21160;&#8221;&#19982;&#8220;&#20851;&#38381;&#8221;&#26041;&#27861;&#12290;
    &#38656;&#35201;&#25351;&#20986;&#30340;&#26159;<code class="literal">Filter</code>&#30340;&#21021;&#22987;&#21270;&#21644;&#38144;&#27585;&#24456;&#23481;&#26131;&#21463;servlet&#23481;&#22120;&#30340;&#24433;&#21709;&#65292;&#22914;&#26524;&#19968;&#20010;<code class="literal">Filter</code>&#20381;&#36182;&#20110;&#36739;&#26089;&#21021;&#22987;&#21270;<code class="literal">Filter</code>&#30340;&#37197;&#32622;&#65292;&#37027;&#20040;&#21487;&#33021;&#20250;&#24341;&#21457;&#19968;&#20123;&#38382;&#39064;&#12290;
    Spring IoC&#23481;&#22120;&#65292;&#20174;&#21478;&#19968;&#26041;&#38754;&#35762;&#65292;&#25317;&#26377;&#26356;&#24378;&#22823;&#30340;&#29983;&#21629;&#21608;&#26399;/IoC&#25509;&#21475;&#65288;&#27604;&#22914;<code class="literal">InitializingBean</code>,
    <code class="literal">DisposableBean</code>, <code class="literal">BeanNameAware</code>,
    <code class="literal">ApplicationContextAware</code>&#21644;&#24456;&#22810;&#20854;&#20182;&#30340;&#65289;&#65292;&#25317;&#26377;&#26356;&#23481;&#26131;&#29702;&#35299;&#30340;&#25509;&#21475;&#21327;&#35758;&#65292;&#21487;&#39044;&#35265;&#30340;&#26041;&#27861;&#35843;&#29992;&#39034;&#24207;&#65292;&#25903;&#25345;&#33258;&#21160;&#32465;&#23450;&#65292;&#26356;&#21487;&#20197;&#36873;&#25321;&#19981;&#29992;&#23454;&#29616;Spring&#30340;&#25509;&#21475;&#65288;&#27604;&#22914;&#36890;&#36807;Spring XML&#20013;&#30340;<code class="literal">destroy-method</code>&#23646;&#24615;&#65289;&#12290;
    &#20171;&#20110;&#36825;&#20123;&#21407;&#22240;&#65292;&#21482;&#35201;&#26377;&#21487;&#33021;&#30340;&#35805;&#65292;&#25105;&#20204;&#25512;&#33616;&#20351;&#29992;Spring&#29983;&#21629;&#21608;&#26399;&#26381;&#21153;&#65292;&#20195;&#26367;servlet&#23481;&#22120;&#30340;&#29983;&#21629;&#21608;&#26399;&#12290;
    &#21487;&#20197;&#21442;&#32771;<code class="classname">DelegatingFilterProxy</code>&#30340;Javadoc&#33719;&#24471;&#26356;&#22810;&#20449;&#24687;&#12290;</p>

      <p>&#26368;&#22909;&#21035;&#29992;<code class="literal">DelegatingFilterProxy</code>&#65292;&#25105;&#20204;&#24378;&#28872;&#25512;&#33616;&#20320;&#20351;&#29992;<code class="literal">FilterChainProxy</code>&#20195;&#26367;&#23427;&#12290;
      &#34429;&#28982;<code class="literal">DelegatingFilterProxy</code>&#26159;&#19968;&#20010;&#38750;&#24120;&#26377;&#29992;&#30340;&#31867;&#65292;&#38382;&#39064;&#26159;&#22312;&#38656;&#35201;&#20351;&#29992;&#20960;&#20010;&#36807;&#28388;&#22120;&#30340;&#26102;&#20505;&#65292;&#38656;&#35201;&#22312;<code class="literal">web.xml</code>&#20013;&#23450;&#20041;<code class="literal">&lt;filter&gt;</code>&#21644;<code class="literal">&lt;filter-mapping&gt;</code>&#20837;&#21475;&#30340;&#20195;&#30721;&#25968;&#37327;&#22826;&#22810;&#20102;&#12290;
      &#20026;&#20102;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#65292;Spring Security&#25552;&#20379;&#20102;&#19968;&#20010;<code class="literal">FilterChainProxy</code>&#31867;&#12290;
      &#23427;&#32465;&#23450;&#20102;&#19968;&#20010;<code class="literal">DelegatingFilterProxy</code>(&#22909;&#20687;&#19978;&#38754;&#30340;&#20363;&#23376;&#37027;&#26679;)&#65292;&#20294;&#26159;&#20351;&#29992;&#30340;&#31867;&#26159;<code class="literal">org.springframework.security.util.FilterChainProxy</code>&#12290;
      &#36807;&#28388;&#22120;&#38142;&#35201;&#22768;&#26126;&#22312;application context&#37324;&#65292;&#20351;&#29992;&#19979;&#38754;&#30340;&#20195;&#30721;&#65306;</p>

    <pre class="programlisting">
&lt;bean id="filterChainProxy" class="org.springframework.security.util.FilterChainProxy"&gt;
  &lt;sec:filter-chain-map path-type="ant"&gt;
     &lt;sec:filter-chain pattern="/webServices/**"
         filters="httpSessionContextIntegrationFilterWithASCFalse,basicProcessingFilter,exceptionTranslationFilter,filterSecurityInterceptor"/&gt;
     &lt;sec:filter-chain pattern="/**"
         filters="httpSessionContextIntegrationFilterWithASCTrue,authenticationProcessingFilter,exceptionTranslationFilter,filterSecurityInterceptor"/&gt;
  &lt;/sec:filter-chain-map&gt;
&lt;/bean&gt;

    </pre>

    <p>&#20320;&#21487;&#33021;&#27880;&#24847;&#21040;<code class="literal">FilterSecurityInterceptor</code>&#22768;&#26126;&#30340;&#19981;&#21516;&#26041;&#24335;&#12290;
    &#23427;&#21516;&#26102;&#25903;&#25345;&#27491;&#21017;&#34920;&#36798;&#24335;&#21644;ant&#36335;&#24452;&#65292;&#24182;&#19988;&#21482;&#20351;&#29992;&#31532;&#19968;&#20010;&#20986;&#29616;&#30340;&#21305;&#37197;URI&#12290;
    &#22312;&#36816;&#34892;&#38454;&#27573;<code class="literal">FilterChainProxy</code>&#20250;&#23450;&#20301;&#24403;&#21069;web&#35831;&#27714;&#21305;&#37197;&#30340;&#31532;&#19968;&#20010;URI&#27169;&#24335;&#65292;&#30001;<code class="literal">filters</code>&#23646;&#24615;&#25351;&#23450;&#30340;&#36807;&#28388;&#22120;bean&#21015;&#34920;&#23558;&#24320;&#22987;&#22788;&#29702;&#35831;&#27714;&#12290;
    &#36807;&#28388;&#22120;&#20250;&#25353;&#29031;&#23450;&#20041;&#30340;&#39034;&#24207;&#20381;&#27425;&#25191;&#34892;&#65292;&#25152;&#20197;&#20320;&#21487;&#20197;&#23545;&#22788;&#29702;&#29305;&#23450;URL&#30340;&#36807;&#28388;&#22120;&#38142;&#36827;&#34892;&#23436;&#20840;&#30340;&#25511;&#21046;&#12290;</p>

    <p>&#20320;&#21487;&#33021;&#27880;&#24847;&#21040;&#20102;&#65292;&#25105;&#20204;&#22312;&#36807;&#28388;&#22120;&#38142;&#37324;&#22768;&#26126;&#20102;&#20004;&#20010;<code class="literal">HttpSessionContextIntegrationFilter</code>&#65288;<code class="literal">ASC</code>&#26159;<code class="literal">allowSessionCreation</code>&#30340;&#31616;&#20889;&#65292;&#26159;<code class="literal">HttpSessionContextIntegrationFilter</code>&#30340;&#19968;&#20010;&#23646;&#24615;&#65289;&#12290;
    &#22240;&#20026;web&#26381;&#21153;&#20174;&#26469;&#19981;&#20250;&#22312;&#35831;&#27714;&#37324;&#24102;&#19978;<code class="literal">jsessionid</code>&#65292;&#20026;&#27599;&#20010;&#29992;&#25143;&#20195;&#29702;&#37117;&#21019;&#24314;&#19968;&#20010;<code class="literal">HttpSession</code>&#23436;&#20840;&#26159;&#19968;&#31181;&#28010;&#36153;&#12290;
    &#22914;&#26524;&#20320;&#38656;&#35201;&#26500;&#24314;&#19968;&#20010;&#39640;&#31561;&#32423;&#26368;&#39640;&#21487;&#25193;&#23637;&#24615;&#30340;&#31995;&#32479;&#65292;&#25105;&#20204;&#25512;&#33616;&#20320;&#20351;&#29992;&#19978;&#38754;&#30340;&#37197;&#32622;&#26041;&#27861;&#12290;
    &#23545;&#20110;&#23567;&#19968;&#28857;&#20799;&#30340;&#39033;&#30446;&#65292;&#20351;&#29992;&#19968;&#20010;<code class="literal">HttpSessionContextIntegrationFilter</code>&#65288;&#35753;&#23427;&#30340;<code class="literal">allowSessionCreation</code>&#40664;&#35748;&#20026;<code class="literal">true</code>&#65289;&#23601;&#36275;&#22815;&#20102;&#12290;</p>

    <p>&#22312;&#26377;&#20851;&#22768;&#26126;&#21608;&#26399;&#30340;&#38382;&#39064;&#19978;&#65292;&#22914;&#26524;&#36825;&#20123;&#26041;&#27861;&#34987;<code class="literal">FilterChainProxy</code>&#33258;&#24049;&#35843;&#29992;&#65292;<code class="literal">FilterChainProxy</code>&#20250;&#22987;&#32456;&#26681;&#25454;&#19979;&#19968;&#23618;&#30340;<code class="literal">Filter</code>&#20195;&#29702;<code class="literal">init(FilterConfig)</code>&#21644;<code class="literal">destroy()</code>&#26041;&#27861;&#12290;
    &#36825;&#26102;&#65292;<code class="literal">FilterChainProxy</code>&#20250;&#20445;&#35777;&#21021;&#22987;&#21270;&#21644;&#38144;&#27585;&#25805;&#20316;&#21482;&#20250;&#22312;<code class="literal">Filter</code>&#19978;&#35843;&#29992;&#19968;&#27425;&#65292;&#32780;&#19981;&#31649;&#23427;&#20204;&#34987;<code class="literal">FilterInvocationDefinitionSource</code>&#22768;&#26126;&#20102;&#22810;&#23569;&#27425;&#12290;
    &#20320;&#21487;&#20197;&#23436;&#20840;&#25511;&#21046;&#26159;&#21542;&#35843;&#29992;&#36825;&#20123;&#26041;&#27861;&#65292;&#36890;&#36807;&#20195;&#29702;<code class="literal">DelegatingFilterProxy</code>&#30340;<code class="literal">targetFilterLifecycle</code>&#21021;&#22987;&#21270;&#21442;&#25968;&#65292;&#12290;
    &#20687;&#19978;&#38754;&#35752;&#35770;&#30340;&#37027;&#26679;&#65292;&#40664;&#35748;&#30340;servlet&#23481;&#22120;&#29983;&#21629;&#21608;&#26399;&#35843;&#29992;&#19981;&#20250;&#34987;<code class="literal">DelegatingFilterProxy</code>&#20195;&#29702;&#12290;</p>

    <p>&#22312;&#20351;&#29992;<a href="">&#21629;&#21517;&#31354;&#38388;&#37197;&#32622;</a>&#30340;&#26102;&#20505;&#65292;&#20320;&#21487;&#20197;&#36890;&#36807;&#21516;&#26679;&#30340;&#26041;&#24335;&#20351;&#29992;<code class="literal">filters = "none"</code>&#23646;&#24615;&#65292;&#26469;&#24314;&#31435;<code class="classname">FilterChainProxy</code>&#12290;
    &#36825;&#23558;&#20174;&#23433;&#20840;&#36807;&#28388;&#22120;&#38142;&#20013;&#23436;&#20840;&#24573;&#30053;&#35831;&#27714;&#30340;&#27169;&#24335;&#12290;
    &#27880;&#24847;&#65292;&#20219;&#20309;&#21305;&#37197;&#36825;&#20010;&#36335;&#24452;&#30340;&#35831;&#27714;&#65292;&#19981;&#20250;&#35201;&#27714;&#35748;&#35777;&#65292;&#19981;&#20250;&#20351;&#29992;&#39564;&#35777;&#26381;&#21153;&#65292;&#21487;&#20197;&#33258;&#30001;&#30340;&#35775;&#38382;&#12290;</p>

    <p>&#23450;&#20041;&#22312;<code class="literal">web.xml</code>&#37324;&#30340;&#36807;&#28388;&#22120;&#30340;&#39034;&#24207;&#26159;&#38750;&#24120;&#37325;&#35201;&#30340;&#12290;
    &#19981;&#35770;&#20320;&#23454;&#38469;&#20351;&#29992;&#30340;&#26159;&#21738;&#20010;&#36807;&#28388;&#22120;&#65292;<code class="literal">&lt;filter-mapping&gt;</code>&#30340;&#39034;&#24207;&#24212;&#35813;&#20687;&#19979;&#38754;&#36825;&#26679;&#65306;</p>

    <div class="orderedlist"><ol type="1"><li>
        <p><code class="literal">ChannelProcessingFilter</code>&#65292;&#22240;&#20026;&#23427;&#21487;&#33021;&#38656;&#35201;&#37325;&#23450;&#21521;&#21040;&#20854;&#20182;&#21327;&#35758;&#12290;</p>
      </li><li>
        <p><code class="literal">ConcurrentSessionFilter</code>&#65292;&#22240;&#20026;&#23427;&#19981;&#20351;&#29992;<code class="literal">SecurityContextHolder</code>&#21151;&#33021;&#65292;&#20294;&#26159;&#38656;&#35201;&#26356;&#26032; <code class="literal">SessionRegistry</code> &#26469;&#20174;&#20027;&#20307;&#20013;&#25918;&#26144;&#27491;&#22312;&#36827;&#34892;&#30340;&#35831;&#27714;&#12290;</p>
      </li><li>
        <p><code class="literal">HttpSessionContextIntegrationFilter</code>&#65292;&#36825;&#26679;
        <code class="literal">SecurityContext</code>&#21487;&#20197;&#22312;web&#35831;&#27714;&#30340;&#24320;&#22987;&#38454;&#27573;&#36890;&#36807;
        <code class="literal">SecurityContextHolder</code>&#24314;&#31435;&#65292;&#28982;&#21518;
        <code class="literal">SecurityContext</code>&#30340;&#20219;&#20309;&#20462;&#25913;&#37117;&#20250;&#22312;web&#35831;&#27714;&#32467;&#26463;&#30340;&#26102;&#20505;&#65288;&#20026;&#19979;&#19968;&#20010;web&#35831;&#27714;&#20570;&#20934;&#22791;&#65289;&#22797;&#21046;&#21040;
        <code class="literal">HttpSession</code>&#20013;&#12290;</p>
      </li><li>
        <p>&#39564;&#35777;&#25191;&#34892;&#26426;&#21046; -
        <code class="literal">AuthenticationProcessingFilter</code>,
        <code class="literal">CasProcessingFilter</code>,
        <code class="literal">BasicProcessingFilter, HttpRequestIntegrationFilter,
        JbossIntegrationFilter</code> &#31561;&#31561; - &#36825;&#26679;
        <code class="literal">SecurityContextHolder</code> &#21487;&#20197;&#34987;&#20462;&#25913;&#65292;&#24182;&#21253;&#21547;&#19968;&#20010;&#21512;&#27861;&#30340; <code class="literal">Authentication</code> &#35831;&#27714;&#26631;&#24535;&#12290;</p>
      </li><li>
        <p><code class="literal">SecurityContextHolderAwareRequestFilter</code>&#65292;&#22914;&#26524;&#65292;&#20320;&#20351;&#29992;&#23427;&#65292;&#25226;&#19968;&#20010;Spring Security&#25552;&#37266;<code class="literal">HttpServletRequestWrapper</code>&#23433;&#35013;&#21040;&#20320;&#30340;servlet&#23481;&#22120;&#37324;&#12290;</p>
      </li><li>
        <p><code class="literal">RememberMeProcessingFilter</code>&#65292;&#36825;&#26679;&#22914;&#26524;&#20043;&#21069;&#30340;&#39564;&#35777;&#25191;&#34892;&#26426;&#21046;&#27809;&#26377;&#26356;&#26032;
        <code class="literal">SecurityContextHolder</code>&#65292;&#36825;&#20010;&#35831;&#27714;&#25552;&#20379;&#20102;&#19968;&#20010;&#21487;&#20197;&#20351;&#29992;&#30340;remember-me&#26381;&#21153;&#30340;cookie&#65292;&#19968;&#20010;&#23545;&#24212;&#30340;&#24050;&#20445;&#23384;&#30340; <code class="literal">Authentication</code>&#23545;&#35937;&#20250;&#34987;&#21019;&#24314;&#20986;&#26469;&#12290;</p>
      </li><li>
        <p><code class="literal">AnonymousProcessingFilter</code>&#65292;&#36825;&#26679;&#22914;&#26524;&#20043;&#21069;&#30340;&#39564;&#35777;&#25191;&#34892;&#26426;&#21046;&#27809;&#26377;&#26356;&#26032;
        <code class="literal">SecurityContextHolder</code>&#65292;&#20250;&#21019;&#24314;&#19968;&#20010;&#21311;&#21517;
        <code class="literal">Authentication</code>&#23545;&#35937;&#12290;</p>
      </li><li>
        <p><code class="literal">ExceptionTranslationFilter</code>&#65292;&#29992;&#26469;&#25429;&#25417;
        Spring Security&#24322;&#24120;&#65292;&#36825;&#26679;&#65292;&#21487;&#33021;&#36820;&#22238;&#19968;&#20010;HTTP&#38169;&#35823;&#21709;&#24212;&#65292;&#25110;&#32773;&#25191;&#34892;&#19968;&#20010;&#23545;&#24212;&#30340;
        <code class="literal">AuthenticationEntryPoint</code>&#12290;</p>
      </li><li>
        <p><code class="literal">FilterSecurityInterceptor</code>&#65292;&#20445;&#25252;web URI&#12290;</p>
      </li></ol></div>

    <p>&#19978;&#38754;&#25152;&#26377;&#30340;&#36807;&#28388;&#22120;&#65292;&#37117;&#20351;&#29992;&#20102;
    <code class="literal">DelegatingFilterProxy</code> &#25110;
    <code class="literal">FilterChainProxy</code>&#12290;&#25512;&#33616;&#20351;&#29992;&#21333;&#29420;&#30340;
        <code class="literal">DelegatingFilterProxy</code> &#20026;&#27599;&#20010;&#31243;&#24207;&#20195;&#29702;&#19968;&#20010;&#21333;&#29420;&#30340;
    <code class="literal">FilterChainProxy</code>&#65292;&#36890;&#36807;&#36825;&#20010;
    <code class="literal">FilterChainProxy</code> &#23450;&#20041;Spring Security&#30340;&#25152;&#26377;&#36807;&#28388;&#22120;&#12290;</p>

    <p>&#22914;&#26524;&#20320;&#20351;&#29992;&#20102;SiteMesh&#65292;&#19968;&#23450;&#35201;&#30830;&#20445;Spring Security&#36807;&#28388;&#22120;&#22312;SiteMesh&#30340;&#36807;&#28388;&#22120;&#20043;&#21069;&#34987;&#35843;&#29992;&#12290;
    &#36825;&#25165;&#21487;&#20197;&#20445;&#35777;&#20026;SiteMesh&#28210;&#26579;&#22120;&#20351;&#29992;&#30340; <code class="literal">SecurityContextHolder</code> &#20808;&#34987;&#32452;&#35013;&#36215;&#26469;&#12290;</p>
  </div>

  <div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="taglib"></a>6.3.&nbsp;&#26631;&#31614;&#24211;</h2></div></div></div>
    

    <p>Spring Security&#25414;&#32465;&#20102;&#24456;&#22810;JSP&#26631;&#31614;&#24211;&#65292;&#25552;&#20379;&#20102;&#21508;&#31181;&#19981;&#21516;&#30340;&#26381;&#21153;&#12290;</p>

    <div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="taglib-config"></a>6.3.1.&nbsp;&#37197;&#32622;</h3></div></div></div>
      
      <p>&#25152;&#26377;&#30340;taglib&#31867;&#37117;&#21253;&#21547;&#22312;&#26680;&#24515;<code class="literal">spring-security-xx.jar</code>&#25991;&#20214;&#37324;&#65292;
        <code class="literal">security.tld</code>&#25991;&#20214;&#25918;&#22312;JAR&#30340;<code class="literal">META-INF</code>&#30446;&#24405;&#19979;&#12290;
        &#36825;&#24847;&#21619;&#30528;&#65292;&#23545;&#20110;JSP 1.2+&#30340;web&#23481;&#22120;&#65292;&#20320;&#21487;&#20197;&#30452;&#25509;&#25226;JAR&#25918;&#21040;WAR&#30340;<code class="literal">WEB-INF/lib</code>&#30446;&#24405;&#19979;&#65292;&#28982;&#21518;&#23601;&#21487;&#20197;&#29992;&#20102;&#12290;
        &#22914;&#26524;&#20320;&#20351;&#29992;&#30340;&#26159;JSP 1.1 &#23481;&#22120;&#65292;&#20320;&#38656;&#35201;&#22312;&#20320;&#30340;<code class="literal">web.xml</code>&#25991;&#20214;&#37324;&#22768;&#26126;JSP taglib&#65292;&#36824;&#35201;&#25226;<code class="literal">security.tld</code>&#25918;&#21040;<code class="literal">WEB-INF/lib</code>&#30446;&#24405;&#19979;&#12290;
        &#25226;&#19979;&#38754;&#30340;&#29255;&#27573;&#28155;&#21152;&#21040;<code class="literal">web.xml</code>&#37324;&#65306;
</p><pre class="programlisting">
&lt;taglib&gt;
  &lt;taglib-uri&gt;http://www.springframework.org/security/tags&lt;/taglib-uri&gt;
  &lt;taglib-location&gt;/WEB-INF/security.tld&lt;/taglib-location&gt;
&lt;/taglib&gt;
</pre>
    </div>

    <div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="taglib-usage"></a>6.3.2.&nbsp;&#20351;&#29992;</h3></div></div></div>
      
      <p>&#29616;&#22312;&#20320;&#24050;&#32463;&#37197;&#32622;&#22909;&#20102;&#26631;&#31614;&#24211;&#65292;&#21487;&#20197;&#36716;&#21040;&#21333;&#29420;&#30340;&#21442;&#32771;&#25351;&#21335;&#31456;&#33410;&#65292;&#38405;&#35835;&#22914;&#20309;&#20351;&#29992;&#20182;&#20204;&#30340;&#35814;&#32454;&#20449;&#24687;&#12290;
        &#27880;&#24847;&#24403;&#20351;&#29992;&#26631;&#31614;&#26102;&#65292;&#20320;&#24212;&#35813;&#22312;&#20320;&#30340;JSP&#37324;&#21253;&#21547;taglib&#24341;&#29992;&#65306;
</p><pre class="programlisting">
  &lt;%@ taglib prefix='security' uri='http://www.springframework.org/security/tags' %&gt;

        </pre>
    </div>
  </div>
</div><div xmlns:fo="http://www.w3.org/1999/XSL/Format" class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="technical-overview.html" tppabs="http://www.family168.com/tutorial/springsecurity/html/technical-overview.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="springsecurity.html" tppabs="http://www.family168.com/tutorial/springsecurity/html/springsecurity.html">Home</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="channel-security.html" tppabs="http://www.family168.com/tutorial/springsecurity/html/channel-security.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;5.&nbsp;&#25216;&#26415;&#27010;&#36848;&nbsp;</td><td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="javascript:if(confirm('http://www.springsource.com/  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://www.springsource.com/'" tppabs="http://www.springsource.com/" title="SpringSource">Sponsored by SpringSource
                                        </a></span></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;7.&nbsp;&#20449;&#36947;&#23433;&#20840;</td></tr></table></div></body></html><script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www./");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-2857097-3");pageTracker._initData();pageTracker._trackPageview();</script>