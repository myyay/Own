<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;23.&nbsp;&#23433;&#20840;&#23545;&#35937;&#23454;&#29616;</title><link rel="stylesheet" href="html.css" tppabs="http://www.family168.com/tutorial/springsecurity/html/css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"><link rel="start" href="springsecurity.html" title="Spring Security"><link rel="up" href="authorization.html" title="Part&nbsp;IV.&nbsp;&#25480;&#26435;"><link rel="prev" href="authorization-common.html" title="Chapter&nbsp;22.&nbsp;&#36890;&#29992;&#25480;&#26435;&#27010;&#24565;"><link rel="next" href="domain-acls.html" title="Chapter&nbsp;24.&nbsp;&#39046;&#22495;&#23545;&#35937;&#23433;&#20840;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="background-color:white;border:none;height:73px;border:1px solid black;"><a style="border:none;" href="javascript:if(confirm('http://static.springframework.org/spring-ws/site/  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://static.springframework.org/spring-ws/site/'" tppabs="http://static.springframework.org/spring-ws/site/" title="The Spring Framework - Spring Web Services"><img style="border:none;" src="xdev-spring_logo.jpg" tppabs="http://www.family168.com/tutorial/springsecurity/html/images/xdev-spring_logo.jpg"></a><a style="border:none;" href="javascript:if(confirm('http://www.springsource.com/  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://www.springsource.com/'" tppabs="http://www.springsource.com/" title="SpringSource"><img style="border:none;position:absolute;padding-top:5px;right:42px;" src="s2-banner-rhs.png" tppabs="http://www.family168.com/tutorial/springsecurity/html/images/s2-banner-rhs.png"></a></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="secure-object-impls"></a>&#23433;&#20840;&#23545;&#35937;&#23454;&#29616;</h1></div></div></div>
  

  <div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aop-alliance"></a>23.1.&nbsp;AOP&#32852;&#30431; (MethodInvocation) &#23433;&#20840;&#25318;&#25130;&#22120;</h2></div></div></div>
    

    <p>
      &#22312;Spring Security 2.0&#20043;&#21069;&#65292;&#23433;&#20840;<code class="literal">MethodInvocation</code>&#38656;&#35201;&#24456;&#22810;&#38149;&#28809;&#26495;&#37197;&#32622;.
      &#29616;&#22312;&#25512;&#33616;&#30340;&#26041;&#24335;&#65292;&#20026;&#26041;&#27861;&#23433;&#20840;&#65292;&#20351;&#29992;<a href="ns-config.html#ns-method-security" tppabs="http://www.family168.com/tutorial/springsecurity/html/ns-config.html#ns-method-security" title="2.4.&nbsp;&#20445;&#25252;&#26041;&#27861;">&#21629;&#21517;&#31354;&#38388;&#37197;&#32622;</a>.
      &#36825;&#20010;&#26041;&#24335;&#65292;&#26041;&#27861;&#23433;&#20840;&#22522;&#30784;&#35774;&#32622;bean&#65292;&#33258;&#21160;&#37197;&#32622;&#20026;&#20320;&#65292;&#36825;&#26679;&#20320;&#19981;&#38656;&#35201;&#30495;&#30340;&#38656;&#35201;&#30693;&#36947;&#23454;&#29616;&#31867;&#12290;
      &#25105;&#20204;&#21482;&#38656;&#35201;&#25552;&#20379;&#19968;&#20010;&#24555;&#36895;&#27010;&#36848;&#23545;&#36825;&#20123;&#31867;&#65292;&#22312;&#36825;&#37324;&#25552;&#21040;&#20102;&#12290;
    </p>

    <p>
      &#26041;&#27861;&#23433;&#20840;&#25552;&#21319;&#65292;&#20351;&#29992; <code class="classname">MethodSecurityInterceptor</code>&#65292;&#23427;&#20250;&#20445;&#38556; <code class="classname">MethodInvocation</code>&#12290;
      &#20381;&#38752;&#37197;&#32622;&#26041;&#27861;&#65292;&#19968;&#20010;&#25318;&#25130;&#22120;&#65292;&#21487;&#33021;&#25351;&#23450;&#19968;&#20010;&#21333;&#29420;&#30340;bean&#65292;&#25110;&#22312;&#22810;&#20010;bean&#20043;&#38388;&#20849;&#20139;&#12290;
      &#25318;&#25130;&#22120;&#20351;&#29992;<code class="interfacename">MethodDefinitionSource</code>&#23454;&#20363;&#33719;&#24471;&#37197;&#32622;&#23646;&#24615;&#65292;&#24212;&#29992;&#29305;&#23450;&#30340;&#26041;&#27861;&#35843;&#29992;&#12290;
      <code class="classname">MapBasedMethodDefinitionSource</code>&#29992;&#26469;&#20445;&#23384;&#37197;&#32622;&#23646;&#24615;&#65292;&#20851;&#38190;&#23383;&#65292;&#36890;&#36807;&#26041;&#27861;&#21517;&#65288;&#20063;&#21487;&#20197;&#26159;&#36890;&#37197;&#31526;&#65289;&#65292;&#20250;&#34987;&#29992;&#22312;&#20869;&#37096;&#65292;&#22312;&#23646;&#24615;&#23450;&#20041;&#22312;application context&#37324;&#65292;&#20351;&#29992;<code class="literal">&lt;intercept-methods&gt;</code> &#25110;<code class="literal">&lt;protect-point&gt;</code>&#20803;&#32032;&#12290;
      &#20854;&#20182;&#23454;&#29616;&#20250;&#29992;&#26469;&#22788;&#29702;&#22522;&#20110;&#27880;&#35299;&#30340;&#37197;&#32622;&#12290;
    </p>

    <div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2778"></a>23.1.1.&nbsp;&#31934;&#30830;&#30340; MethodSecurityIterceptor &#37197;&#32622;</h3></div></div></div>
      
      <p>
        &#20320;&#21487;&#20197;&#65292;&#24403;&#28982;&#65292;&#37197;&#32622;&#19968;&#20010; <code class="classname">MethodSecurityIterceptor</code> &#30452;&#25509;&#22312;&#20320;&#30340;application context&#37324;&#65292;&#20026;&#20351;&#29992;&#19968;&#20010;Spring AOP&#20195;&#29702;&#26426;&#21046;&#65306;
</p><pre class="programlisting">
&lt;bean id="bankManagerSecurity"
    class="org.springframework.security.intercept.method.aopalliance.MethodSecurityInterceptor"&gt;
  &lt;property name="authenticationManager" ref="authenticationManager"/&gt;
  &lt;property name="accessDecisionManager" ref="accessDecisionManager"/&gt;
  &lt;property name="afterInvocationManager" ref="afterInvocationManager"/&gt;
  &lt;property name="objectDefinitionSource"&gt;
    &lt;value&gt;
      org.springframework.security.context.BankManager.delete*=ROLE_SUPERVISOR
      org.springframework.security.context.BankManager.getBalance=ROLE_TELLER,ROLE_SUPERVISOR
    &lt;/value&gt;
  &lt;/property&gt;
&lt;/bean&gt; 
</pre><p>
      </p>
    </div>

  </div>

  <div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aspectj"></a>23.2.&nbsp;AspectJ (JoinPoint) &#23433;&#20840;&#25318;&#25130;&#22120;</h2></div></div></div>


    <p>AspectJ &#23433;&#20840;&#25318;&#25130;&#22120;&#30456;&#23545;&#20110;&#65292;&#19978;&#38754;&#35752;&#35770;&#30340;AOP&#32852;&#30431;&#23433;&#20840;&#25318;&#25130;&#22120;&#65292;&#23601;&#38750;&#24120;&#31616;&#21333;&#20102;&#12290;
    &#20107;&#23454;&#19978;&#65292;&#25105;&#20204;&#36825;&#33410;&#21482;&#35752;&#35770;&#19981;&#21516;&#30340;&#37096;&#20998;&#12290;</p>

    <p>AspectJ &#25318;&#25130;&#22120;&#30340;&#21517;&#23383;&#26159; <code class="literal">AspectJSecurityInterceptor</code>&#12290;
    &#19982;AOP&#32852;&#30431;&#23433;&#20840;&#25318;&#25130;&#22120;&#19981;&#21516;&#65292;&#22312;Spring&#30340;application context&#20013;&#30340;&#23433;&#20840;&#25318;&#25130;&#22120;&#36890;&#36807;&#20195;&#29702;&#32455;&#20837;&#65292;<code class="literal">AspectJSecurityInterceptor</code>&#26159;&#36890;&#36807;AspectJ&#32534;&#35793;&#22120;&#32455;&#20837;&#12290;
    &#22312;&#19968;&#20010;&#31995;&#32479;&#37324;&#20351;&#29992;&#20004;&#31181;&#31867;&#22411;&#30340;&#23433;&#20840;&#25318;&#25130;&#22120;&#20063;&#26159;&#24120;&#35265;&#30340;&#65292;&#20351;&#29992;<code class="literal">AspectJSecurityInterceptor</code>&#22788;&#29702;&#39046;&#22495;&#23545;&#35937;&#23454;&#20363;&#30340;&#23433;&#20840;&#65292;AOP&#32852;&#30431;<code class="literal">MethodSecurityInterceptor</code>&#29992;&#26469;&#22788;&#29702;&#26381;&#21153;&#23618;&#23433;&#20840;&#12290;</p>

    <p>&#35753;&#25105;&#20204;&#39318;&#20808;&#32771;&#34385;&#22914;&#20309;&#25226;<code class="literal">AspectJSecurityInterceptor</code>&#37197;&#32622;&#21040;spring&#30340;application context&#37324;&#65306;</p>

    <pre class="programlisting">
&lt;bean id="bankManagerSecurity"
        class="org.springframework.security.intercept.method.aspectj.AspectJSecurityInterceptor"&gt;
  &lt;property name="authenticationManager" ref="authenticationManager"/&gt;
  &lt;property name="accessDecisionManager" ref="accessDecisionManager"/&gt;
  &lt;property name="afterInvocationManager" ref="afterInvocationManager"/&gt;
  &lt;property name="objectDefinitionSource"&gt;
    &lt;value&gt;
        org.springframework.security.context.BankManager.delete*=ROLE_SUPERVISOR
        org.springframework.security.context.BankManager.getBalance=ROLE_TELLER,ROLE_SUPERVISOR
    &lt;/value&gt;
&lt;/property&gt;
&lt;/bean&gt;        </pre>

    <p>&#20687;&#20320;&#30475;&#21040;&#30340;&#65292;&#31867;&#21517;&#30340;&#37096;&#20998;&#65292;<code class="literal">AspectJSecurityInterceptor</code>&#20854;&#23454;&#19982;AOP&#32852;&#30431;&#23433;&#20840;&#25318;&#25130;&#22120;&#19968;&#26679;&#12290;
    &#23454;&#38469;&#19978;&#65292;&#20004;&#20010;&#25318;&#25130;&#22120;&#20849;&#20139;&#21516;&#26679;&#30340;<code class="literal">objectDefinitionSource</code>&#65292;<code class="literal">ObjectDefinitionSource</code>&#36816;&#34892;&#30340;&#26102;&#20505;&#20351;&#29992;<code class="literal">java.lang.reflect.Method</code>&#32780;&#19981;&#26159;AOP&#24211;&#29305;&#23450;&#30340;&#31867;&#12290;
    &#24403;&#28982;&#65292;&#20320;&#30340;&#35775;&#38382;&#34920;&#20915;&#65292;&#30456;&#23545;AOP&#24211;&#25351;&#23450;&#30340;&#23545;&#35937;&#65288;&#27604;&#22914;<code class="literal">MethodInvocation</code> &#25110; <code class="literal">JoinPoint</code>&#65289;&#65292;&#22909;&#20687;&#21487;&#20197;&#32771;&#34385;&#26356;&#31934;&#30830;&#33539;&#22260;&#65292;&#22312;&#20351;&#29992;&#38450;&#20266;&#20915;&#35758;&#65288;&#27604;&#22914;&#26041;&#27861;&#21442;&#25968;&#65289;&#12290;</p>

    <p>&#19979;&#19968;&#27493;&#65292;&#20320;&#38656;&#35201;&#23450;&#20041;&#19968;&#20010; AspectJ <code class="literal">&#20999;&#38754;</code>&#12290;&#27604;&#22914;&#65306;</p>

    <pre class="programlisting">
package org.springframework.security.samples.aspectj;

import org.springframework.security.intercept.method.aspectj.AspectJSecurityInterceptor;
import org.springframework.security.intercept.method.aspectj.AspectJCallback;
import org.springframework.beans.factory.InitializingBean;

public aspect DomainObjectInstanceSecurityAspect implements InitializingBean {

private AspectJSecurityInterceptor securityInterceptor;

pointcut domainObjectInstanceExecution(): target(PersistableEntity)
      &amp;&amp; execution(public * *(..)) &amp;&amp; !within(DomainObjectInstanceSecurityAspect);

Object around(): domainObjectInstanceExecution() {
  if (this.securityInterceptor == null) {
    return proceed();
  }

  AspectJCallback callback = new AspectJCallback() {
      public Object proceedWithObject() {
        return proceed();
      }
  };

  return this.securityInterceptor.invoke(thisJoinPoint, callback);
}

public AspectJSecurityInterceptor getSecurityInterceptor() {
  return securityInterceptor;
}

public void setSecurityInterceptor(AspectJSecurityInterceptor securityInterceptor) {
  this.securityInterceptor = securityInterceptor;
}

public void afterPropertiesSet() throws Exception {
  if (this.securityInterceptor == null)
    throw new IllegalArgumentException("securityInterceptor required");
  }
}</pre>

    <p>&#22312;&#19978;&#38754;&#20363;&#23376;&#37324;&#65292;&#23433;&#20840;&#25318;&#25130;&#22120;&#20250;&#20316;&#29992;&#22312;&#27599;&#19968;&#20010;<code class="literal">PersistableEntity</code>&#23454;&#20363;&#19978;&#65292;&#36825;&#26159;&#27809;&#25552;&#21040;&#36807;&#30340;&#19968;&#20010;&#25277;&#35937;&#31867;&#65288;&#20320;&#21487;&#20197;&#20351;&#29992;&#20219;&#20309;&#20854;&#20182;&#30340;&#31867;&#25110;&#20320;&#21916;&#27426;&#30340;<code class="literal">&#20999;&#28857;</code>&#65289;&#12290;
    &#23545;&#20110;&#37027;&#20123;&#24773;&#20917;<code class="literal">AspectJCallback</code>&#38656;&#35201;&#65292;&#22240;&#20026;<code class="literal">proceed();</code>&#35821;&#21477;&#65292;&#26377;&#29305;&#23450;&#30340;&#21547;&#20041;&#65292;&#21482;&#26377;&#22312;<code class="literal">around()</code>&#20869;&#23481;&#20013;&#12290;
    <code class="literal">AspectJSecurityInterceptor</code>&#35843;&#29992;&#36825;&#20010;&#21311;&#21517;<code class="literal">AspectJCallback</code>&#31867;&#65292;&#22312;&#23427;&#24819;&#32487;&#32493;&#30446;&#26631;&#23545;&#35937;&#26102;&#12290;</p>

    <p>&#20320;&#20250;&#38656;&#35201;&#37197;&#32622;Spring&#35835;&#21462;&#20999;&#38754;&#65292;&#32455;&#20837;&#21040;<code class="literal">AspectJSecurityInterceptor</code>&#20013;&#12290;
    &#19979;&#38754;&#30340;&#22768;&#26126;&#20250;&#22788;&#29702;&#36825;&#20010;&#65306;</p>

    <pre class="programlisting">
&lt;bean id="domainObjectInstanceSecurityAspect"
        class="org.springframework.security.samples.aspectj.DomainObjectInstanceSecurityAspect"
        factory-method="aspectOf"&gt;
&lt;property name="securityInterceptor"&gt;&lt;ref bean="aspectJSecurityInterceptor"/&gt;&lt;/property&gt;
&lt;/bean&gt;

    </pre>

    <p>&#23601;&#26159;&#36825;&#20010;&#20102;&#65281;&#29616;&#22312;&#20320;&#21487;&#20197;&#22312;&#20320;&#30340;&#31995;&#32479;&#37324;&#20219;&#20309;&#22320;&#26041;&#21019;&#24314;bean&#20102;&#65292;&#26080;&#35770;&#29992;&#20160;&#20040;&#24847;&#24605;&#20320;&#24819;&#21040;&#30340;&#65288;&#27604;&#22914;<code class="literal">new
    Person();</code>&#65289;&#65292;&#20182;&#20204;&#20250;&#34987;&#23433;&#20840;&#25318;&#25130;&#22120;&#24212;&#29992;&#12290;</p>
  </div>

  <div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="filter-invocation-authorization"></a>23.3.&nbsp;FilterInvocation &#23433;&#20840;&#25318;&#25130;&#22120;</h2></div></div></div>


      <p>&#20026;&#20102;&#20445;&#25252; <code class="classname">FilterInvocation</code>&#65292;&#24320;&#21457;&#32773;&#38656;&#35201;&#28155;&#21152; <code class="literal">FilterSecurityInterceptor</code> &#21040;&#23427;&#20204;&#30340;&#36807;&#28388;&#22120;&#38142;&#12290;
      &#20856;&#22411;&#37197;&#32622;&#20363;&#23376;&#22914;&#19979;&#65306;</p>

    <p>&#22312; application context &#20320;&#38656;&#35201;&#37197;&#32622;&#19977;&#20010;bean&#65306;</p>

    <pre class="programlisting">

&lt;bean id="exceptionTranslationFilter"
        class="org.springframework.security.ui.ExceptionTranslationFilter"&gt;
  &lt;property name="authenticationEntryPoint" ref="authenticationEntryPoint"/&gt;
&lt;/bean&gt;

&lt;bean id="authenticationEntryPoint"
        class="org.springframework.security.ui.webapp.AuthenticationProcessingFilterEntryPoint"&gt;
  &lt;property name="loginFormUrl" value="/acegilogin.jsp"/&gt;
  &lt;property name="forceHttps" value="false"/&gt;
&lt;/bean&gt;

&lt;bean id="filterSecurityInterceptor"
        class="org.springframework.security.intercept.web.FilterSecurityInterceptor"&gt;
  &lt;property name="authenticationManager" ref="authenticationManager"/&gt;
  &lt;property name="accessDecisionManager" ref="accessDecisionManager"/&gt;
  &lt;property name="objectDefinitionSource"&gt;
    &lt;security:filter-invocation-definition-source&gt;
      &lt;security:intercept-url pattern="/secure/super/**" access="ROLE_WE_DONT_HAVE"/&gt;
      &lt;security:intercept-url pattern="/secure/**" access="ROLE_SUPERVISOR,ROLE_TELLER"/&gt;
    &lt;/security:filter-invocation-definition-source&gt;
  &lt;/property&gt;
&lt;/bean&gt;         </pre>

    <p> <code class="classname">ExceptionTranslationFilter</code> &#25552;&#20379;&#20102;Java&#24322;&#24120;&#21644;HTTP&#21709;&#24212;&#20043;&#38388;&#30340;&#26725;&#26753;&#12290;
    &#20182;&#20204;&#19982;&#32500;&#25252;&#30340;&#29992;&#25143;&#25509;&#21475;&#20043;&#38388;&#26159;&#23436;&#20840;&#29420;&#31435;&#30340;&#12290;
    &#36807;&#28388;&#22120;&#27809;&#26377;&#25191;&#34892;&#20219;&#20309;&#30495;&#23454;&#30340;&#23433;&#20840;&#25552;&#21319;&#12290;
    &#22914;&#26524;&#19968;&#20010; <code class="exceptionname">AuthenticationException</code> &#34987;&#26816;&#27979;&#21040;&#65292;&#36807;&#28388;&#22120;&#20250;&#35843;&#29992; AuthenticationEntryPoint &#25166;&#23637;&#24320;&#35748;&#35777;&#36807;&#31243;&#65288;&#27604;&#22914;&#19968;&#20010;&#29992;&#25143;&#30331;&#24405;&#65289;&#12290;</p>

    <p> <code class="literal">AuthenticationEntryPoint</code> &#20250;&#34987;&#35843;&#29992;&#65292;&#22914;&#26524;&#29992;&#25143;&#35831;&#27714;&#21463;&#20445;&#25252;&#30340;HTTP&#35831;&#27714;&#65292;&#20294;&#26159;&#20182;&#20204;&#27809;&#26377;&#35748;&#35777;&#12290;
    &#31867;&#22788;&#29702;&#34920;&#29616;&#23545;&#24212;&#21709;&#24212;&#21040;&#29992;&#25143;&#65292;&#36825;&#26679;&#39564;&#35777;&#21487;&#20197;&#24320;&#22987;&#12290;
    &#19977;&#20010;&#20855;&#20307;&#23454;&#29616;&#30001;Spring Security&#25552;&#20379;&#65306;<code class="literal">AuthenticationProcessingFilterEntryPoint</code> &#20026;&#23637;&#24320;&#34920;&#21333;&#35748;&#35777;&#65292; <code class="literal">BasicProcessingFilterEntryPoint</code> &#20026;&#23637;&#24320;HTTP&#22522;&#26412;&#35748;&#35777;&#36807;&#31243;&#65292;<code class="literal">CasProcessingFilterEntryPoint</code> &#20026;&#23637;&#24320;JA-SIG&#20013;&#24515;&#35748;&#35777;&#26381;&#21153;&#65288;CAS&#65289;&#30331;&#24405;&#12290;
    <code class="literal">AuthenticationProcessingFilterEntryPoint</code> &#21644; <code class="literal">CasProcessingFilterEntryPoint</code>&#26377;&#21487;&#36873;&#39033;&#65292;&#21487;&#20197;&#24378;&#21046;&#20351;&#29992;HTTPS&#65292;&#25152;&#20197;&#22914;&#26524;&#38656;&#35201;&#23427;&#65292;&#35831;&#21442;&#32771;JavaDocs&#12290;</p>

    <p><code class="literal">FilterSecurityInterceptor</code> &#29992;&#26469;&#22788;&#29702;HTTP&#36164;&#28304;&#30340;&#23433;&#20840;&#12290;
    &#20687;&#20854;&#20182;&#23433;&#20840;&#25318;&#25130;&#22120;&#65292;&#23427;&#38656;&#35201;&#24341;&#29992;<code class="literal">AuthenticationManager</code> &#21644; <code class="literal">AccessDecisionManager</code>&#65292;&#23427;&#20204;&#37117;&#20250;&#22312;&#19979;&#38754;&#30340;&#21333;&#29420;&#31456;&#33410;&#37324;&#36827;&#34892;&#35752;&#35770;&#12290;
    <code class="literal">FilterSecurityInterceptor</code>&#20063;&#20351;&#29992;&#37197;&#32622;&#23646;&#24615;&#36827;&#34892;&#37197;&#32622;&#65292;&#24212;&#29992;&#19981;&#21516;&#30340;HTTP URL&#35831;&#27714;&#12290;
    &#19968;&#20010;&#23545;&#37197;&#32622;&#23646;&#24615;&#30340;&#23436;&#20840;&#35752;&#35770;&#65292;&#25552;&#20379;&#22312;&#36825;&#20221;&#25991;&#26723;&#30340;&#39640;&#32423;&#35774;&#35745;&#31456;&#33410;&#20013;&#12290;</p>

    <p> <code class="literal">FilterSecurityInterceptor</code> &#21487;&#20197;&#20351;&#29992;&#20004;&#31181;&#26041;&#24335;&#37197;&#32622;&#37197;&#32622;&#23646;&#24615;&#12290;
    &#31532;&#19968;&#31181;&#65292;&#22312;&#19978;&#38754;&#28436;&#31034;&#20102;&#65292;&#20351;&#29992;<code class="literal">&lt;filter-invocation-definition-source&gt;</code>&#21629;&#21517;&#20803;&#32032;&#12290;
    &#23427;&#30452;&#25509;&#20351;&#29992; <code class="literal">&lt;filter-chain-map&gt;</code>&#37197;&#32622;&#19968;&#20010;<code class="literal">FilterChainProxy</code>&#65292;&#20294;&#26159;<code class="literal">&lt;intercept-url&gt;</code>&#23376;&#20803;&#32032;&#65292;&#21482;&#20351;&#29992;<code class="literal">pattern</code>&#21644;<code class="literal">access</code>&#23646;&#24615;&#12290;
    &#31532;&#20108;&#31181;&#65292;&#20889;&#20320;&#33258;&#24049;&#30340;<code class="literal">ObjectDefinitionSource</code>&#65292;&#34429;&#28982;&#36825;&#20010;&#36229;&#36234;&#20102;&#25991;&#26723;&#30340;&#33539;&#22260;&#12290;
    &#19981;&#35770;&#20351;&#29992;&#21738;&#31181;&#26041;&#27861;&#65292;<code class="literal">ObjectDefinitionSource</code>&#29992;&#26469;&#36820;&#22238;<code class="literal">ConfigAttributeDefinition</code>&#23545;&#35937;&#65292;&#21253;&#21547;&#25152;&#26377;&#37197;&#32622;&#23646;&#24615;&#65292;&#20998;&#37197;&#32473;&#21333;&#29420;&#30340;&#21463;&#20445;&#25252;HTTP URL&#12290;</p>

    <p>&#24212;&#35813;&#27880;&#24847; <code class="literal">FilterSecurityInterceptor.setObjectDefinitionSource()</code>&#26041;&#27861;&#20854;&#23454;&#26399;&#26395;&#19968;&#20010;<code class="literal">FilterInvocationDefinitionSource</code>&#23454;&#20363;&#12290;
    &#36825;&#26159;&#19968;&#20010;&#32487;&#25215;&#20102;<code class="literal">ObjectDefinitionSource</code>&#30340;&#26631;&#35760;&#25509;&#21475;&#12290;
    &#23427;&#30452;&#25509;&#25552;&#20379;<code class="literal">ObjectDefinitionSource</code>&#65292;&#29702;&#35299;<code class="literal">FilterInvocation</code>&#12290;
    &#24863;&#20852;&#36259;&#31616;&#21333;&#65292;&#25105;&#20204;&#32487;&#32493;&#21442;&#32771; <code class="literal">FilterInvocationDefinitionSource</code>&#65292;&#20687;&#19968;&#20010;<code class="literal">ObjectDefinitionSource</code>&#65292;&#22823;&#22810;&#25968;&#29992;&#25143;&#30340;<code class="literal">FilterSecurityInterceptor</code>&#30340;&#21306;&#21035;&#37117;&#26377;&#24456;&#23567;&#30340;&#30456;&#20851;&#24615;&#12290;</p>

    <p>&#22312;&#20351;&#29992;&#21629;&#21517;&#31354;&#38388;&#36873;&#39033;&#37197;&#32622;&#25318;&#25130;&#22120;&#26102;&#65292;&#30340;&#21734;&#22909;&#29992;&#26469;&#20998;&#21106;&#19981;&#21516;&#30340;&#37197;&#32622;&#23646;&#24615;&#65292;&#24212;&#29992;&#22312;&#27599;&#20010;HTTP URL&#12290;
    &#27599;&#20010;&#37197;&#32622;&#23646;&#24615;&#20998;&#37197;&#21040;&#23427;&#33258;&#24049;&#30340;<code class="literal">SecurityConfig</code>&#23545;&#35937;&#37324;&#12290;
    <code class="literal">SecurityConfig</code>&#23545;&#35937;&#22312;&#39640;&#32423;&#35774;&#35745;&#31456;&#20013;&#35752;&#35770;&#12290;
    <code class="literal">ObjectDefinitionSource</code>&#34987;&#23646;&#24615;&#32534;&#36753;&#22120;&#21019;&#24314;&#65292;<code class="literal">FilterInvocationDefinitionSource</code>&#65292;&#21305;&#37197;&#37197;&#32622;&#23646;&#24615;<code class="literal">FilterInvocations</code>&#65292;&#22522;&#20110;&#35831;&#27714;URL&#30340;&#34920;&#36798;&#24335;&#35745;&#31639;&#12290;
    &#20004;&#20010;&#26631;&#20934;&#34920;&#36798;&#24335;&#35821;&#27861;&#34987;&#25903;&#25345;&#20102;&#12290;
    &#40664;&#35748;&#30340;&#26159;&#22788;&#29702;&#25152;&#26377;&#34920;&#36798;&#24335;&#65292;&#29992;Apache Ant&#36335;&#24452;&#21644;&#27491;&#21017;&#34920;&#36798;&#24335;&#65292;&#20063;&#25903;&#25345;ore&#22797;&#26434;&#24773;&#20917;&#12290;
    <code class="literal">path-type</code>&#23646;&#24615;&#29992;&#26469;&#25351;&#23450;&#20351;&#29992;&#30340;&#27169;&#24335;&#31867;&#22411;&#12290;
    &#19981;&#21487;&#33021;&#22312;&#19968;&#20010;&#23450;&#20041;&#37324;&#20351;&#29992;&#32452;&#21512;&#34920;&#36798;&#24335;&#35821;&#27861;&#12290;
    &#27604;&#22914;&#65292;&#19978;&#19968;&#20010;&#37197;&#32622;&#20351;&#29992;&#27491;&#21017;&#34920;&#36798;&#24335;&#65292;&#20195;&#26367;Ant&#36335;&#24452;&#65292;&#20250;&#20889;&#25104;&#19979;&#38754;&#36825;&#26679;&#65306;</p>

    <pre class="programlisting">
&lt;bean id="filterInvocationInterceptor"
        class="org.springframework.security.intercept.web.FilterSecurityInterceptor"&gt;
  &lt;property name="authenticationManager" ref="authenticationManager"/&gt;
  &lt;property name="accessDecisionManager" ref="accessDecisionManager"/&gt;
  &lt;property name="runAsManager" ref="runAsManager"/&gt;
  &lt;property name="objectDefinitionSource"&gt;
    &lt;security:filter-invocation-definition-source path-type="regex"&gt;
      &lt;security:intercept-url pattern="\A/secure/super/.*\Z" access="ROLE_WE_DONT_HAVE"/&gt;
      &lt;security:intercept-url pattern="\A/secure/.*\" access="ROLE_SUPERVISOR,ROLE_TELLER"/&gt;
    &lt;/security:filter-invocation-definition-source&gt;
  &lt;/property&gt;
&lt;/bean&gt;        </pre>

    <p>&#26080;&#35770;&#20351;&#29992;&#20160;&#20040;&#34920;&#36798;&#24335;&#35821;&#27861;&#65292;&#34920;&#36798;&#24335;&#36890;&#24120;&#25191;&#34892;&#65292;&#26681;&#25454;&#23427;&#20204;&#30340;&#23450;&#20041;&#12290;
    &#22240;&#27492;&#37325;&#35201;&#30340;&#65292;&#26356;&#29305;&#23450;&#30340;&#34920;&#36798;&#24335;&#35201;&#25918;&#22312;&#19981;&#29305;&#23450;&#30340;&#34920;&#36798;&#24335;&#65292;&#22312;&#21015;&#34920;&#30340;&#39640;&#22788;&#12290;
    &#22312;&#25105;&#20204;&#19978;&#38754;&#30340;&#20363;&#23376;&#37324;&#26377;&#25552;&#21450;&#65292;&#26356;&#29305;&#27530;&#30340; <code class="literal">/secure/super/</code> &#27169;&#24335;&#25918;&#22312;&#65292;&#36739;&#23569;&#29305;&#27530; <code class="literal">/secure/</code>&#27169;&#22411;&#65292;&#39640;&#30340;&#22320;&#26041;&#12290;
    &#22914;&#26524;&#23427;&#20204;&#25442;&#20102;&#20301;&#32622;&#65292;<code class="literal">/secure/</code>&#20250;&#19968;&#30452;&#21305;&#37197;&#65292;<code class="literal">/secure/super/</code>&#27704;&#36828;&#19981;&#20250;&#25191;&#34892;&#30340;&#12290;</p>

    <p>&#20687;&#20351;&#29992;&#20854;&#20182;&#23433;&#20840;&#25318;&#25130;&#22120;&#65292;<code class="literal">validateConfigAttributes</code>&#23646;&#24615;&#34987;&#35266;&#23519;&#12290;
    &#35774;&#32622;&#25104;<code class="literal">true</code>&#30340;&#26102;&#20505;&#65288;&#40664;&#35748;&#65289;&#65292;&#22312;&#21551;&#21160;&#30340;&#26102;&#20505; <code class="literal">FilterSecurityInterceptor</code> &#20250;&#25191;&#34892;&#65292;&#22914;&#26524;&#25552;&#20379;&#30340;&#37197;&#32622;&#23646;&#24615;&#26159;&#26377;&#25928;&#30340;&#12290;
    &#23427;&#26816;&#27979;&#27599;&#20010;&#21487;&#20197;&#25191;&#34892;&#30340;&#37197;&#32622;&#23646;&#24615;&#65292;&#36890;&#36807;<code class="literal">AccessDecisionManager</code> &#25110; <code class="literal">RunAsManager</code>&#12290;
    &#22914;&#26524;&#27809;&#26377;&#21487;&#20197;&#25191;&#34892;&#30340;&#37197;&#32622;&#23646;&#24615;&#65292;&#20250;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#12290;</p>
  </div>
</div><div xmlns:fo="http://www.w3.org/1999/XSL/Format" class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="authorization-common.html" tppabs="http://www.family168.com/tutorial/springsecurity/html/authorization-common.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="springsecurity.html" tppabs="http://www.family168.com/tutorial/springsecurity/html/springsecurity.html">Home</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="domain-acls.html" tppabs="http://www.family168.com/tutorial/springsecurity/html/domain-acls.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;22.&nbsp;&#36890;&#29992;&#25480;&#26435;&#27010;&#24565;&nbsp;</td><td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="javascript:if(confirm('http://www.springsource.com/  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://www.springsource.com/'" tppabs="http://www.springsource.com/" title="SpringSource">Sponsored by SpringSource
                                        </a></span></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;24.&nbsp;&#39046;&#22495;&#23545;&#35937;&#23433;&#20840;</td></tr></table></div></body></html><script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www./");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-2857097-3");pageTracker._initData();pageTracker._trackPageview();</script>