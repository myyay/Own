<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;8.&nbsp;&#36890;&#29992;&#35748;&#35777;&#26381;&#21153;</title><link rel="stylesheet" href="html.css" tppabs="http://www.family168.com/tutorial/springsecurity/html/css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"><link rel="start" href="springsecurity.html" title="Spring Security"><link rel="up" href="authentication.html" title="Part&nbsp;III.&nbsp;&#35748;&#35777;"><link rel="prev" href="authentication.html" title="Part&nbsp;III.&nbsp;&#35748;&#35777;"><link rel="next" href="dao-provider.html" title="Chapter&nbsp;9.&nbsp;DAO&#35748;&#35777;&#25552;&#20379;&#22120;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="background-color:white;border:none;height:73px;border:1px solid black;"><a style="border:none;" href="javascript:if(confirm('http://static.springframework.org/spring-ws/site/  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://static.springframework.org/spring-ws/site/'" tppabs="http://static.springframework.org/spring-ws/site/" title="The Spring Framework - Spring Web Services"><img style="border:none;" src="xdev-spring_logo.jpg" tppabs="http://www.family168.com/tutorial/springsecurity/html/images/xdev-spring_logo.jpg"></a><a style="border:none;" href="javascript:if(confirm('http://www.springsource.com/  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://www.springsource.com/'" tppabs="http://www.springsource.com/" title="SpringSource"><img style="border:none;position:absolute;padding-top:5px;right:42px;" src="s2-banner-rhs.png" tppabs="http://www.family168.com/tutorial/springsecurity/html/images/s2-banner-rhs.png"></a></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="authentication-common-auth-services"></a>&#36890;&#29992;&#35748;&#35777;&#26381;&#21153;</h1></div></div></div>
  

  <div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mechanisms-providers-entry-points"></a>8.1.&nbsp;&#26426;&#21046;&#65292;&#20379;&#24212;&#32773;&#21644;&#20837;&#21475;</h2></div></div></div>
    

    <p>&#22914;&#26524;&#20320;&#20351;&#29992;Spring Security&#25552;&#20379;&#30340;&#35748;&#35777;&#26041;&#24335;&#65292;&#20320;&#36890;&#24120;&#38656;&#35201;&#37197;&#32622;&#19968;&#20010;web&#36807;&#28388;&#22120;&#65292;<code class="literal">AuthenticationProvider</code> &#21644;
    <code class="literal">AuthenticationEntryPoint</code>&#12290;
    &#22312;&#36825;&#31456;&#37324;&#65292;&#25105;&#20204;&#23558;&#35201;&#30740;&#31350;&#19968;&#20010;&#24212;&#29992;&#20363;&#23376;&#65292;&#23427;&#35201;&#25903;&#25345;&#22522;&#20110;&#34920;&#21333;&#30340;&#35748;&#35777;&#65288;&#27604;&#22914;&#65292;&#25226;&#19968;&#20010;&#38750;&#24120;&#22909;&#30340;HTML&#39029;&#38754;&#23637;&#29616;&#32473;&#29992;&#25143;&#65292;&#35753;&#20182;&#20204;&#36827;&#34892;&#30331;&#24405;&#65289;&#21644;&#22522;&#26412;&#35748;&#35777;&#65288;&#27604;&#22914;&#19968;&#20010;web&#26381;&#21153;&#25110;&#31867;&#20284;&#21487;&#35775;&#38382;&#30340;&#34987;&#20445;&#25252;&#36164;&#28304;&#65289;&#12290;</p>

    <p>&#22312;web.xml&#37324;&#65292;&#36825;&#20010;&#31243;&#24207;&#38656;&#35201;&#21333;&#29420;&#30340;Spring Security&#36807;&#28388;&#22120;&#26469;&#20351;&#29992;FilterChainProxy&#12290;
    &#20960;&#20046;&#25152;&#26377;Spring Security&#31243;&#24207;&#37117;&#26377;&#36825;&#26679;&#19968;&#20010;&#20837;&#21475;&#65292;&#30475;&#36215;&#26469;&#20687;&#36825;&#26679;&#65306;</p>

    <pre class="programlisting">
&lt;filter&gt;
    &lt;filter-name&gt;filterChainProxy&lt;/filter-name&gt;
    &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;
&lt;/filter&gt;

&lt;filter-mapping&gt;
  &lt;filter-name&gt;filterChainProxy&lt;/filter-name&gt;
  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
</pre>

    <p>&#19978;&#38754;&#30340;&#22768;&#26126;&#20250;&#35753;&#25152;&#26377;web&#35831;&#27714;&#65292;&#37117;&#36890;&#36807;&#21483;&#20570;<code class="literal">filterChainProxy</code>&#30340;bean&#65292;&#36890;&#24120;&#23427;&#26159;Spring Security&#30340;<code class="classname">FilterChainProxy</code>&#30340;&#19968;&#20010;&#23454;&#20363;&#12290;
        &#23601;&#20687;&#22312;&#36825;&#20010;&#21442;&#32771;&#25351;&#21335;&#30340;&#36807;&#28388;&#22120;&#31456;&#33410;&#35299;&#37322;&#30340;&#37027;&#26679;&#65292;<code class="classname">FilterChainProxy</code>&#26159;&#19968;&#20010;&#36890;&#29992;&#31867;&#65292;&#35753;web&#35831;&#27714;&#21487;&#20197;&#22522;&#20110;URL&#27169;&#24335;&#36890;&#36807;&#19981;&#21516;&#30340;&#36807;&#28388;&#22120;&#12290;
        &#37027;&#20123;&#34987;&#22996;&#27966;&#30340;&#36807;&#28388;&#22120;&#37117;&#31649;&#29702;&#22312;application context&#20013;&#65292;&#36825;&#26679;&#23427;&#20204;&#21487;&#20197;&#20174;&#20381;&#36182;&#27880;&#20837;&#33719;&#24471;&#26356;&#22823;&#30340;&#30410;&#22788;&#12290;
        &#35753;&#25105;&#20204;&#30475;&#19968;&#19979;FilterChainProxy bean&#23450;&#20041;&#65292;&#22312;application context&#30340;&#24418;&#24335;&#23601;&#20687;&#36825;&#26679;&#65306;</p>

    <pre class="programlisting">
&lt;bean id="filterChainProxy"
        class="org.springframework.security.util.FilterChainProxy"&gt;
  &lt;security:filter-chain-map path-type="ant"&gt;
    &lt;security:filter-chain pattern="/**" filters="httpSessionContextIntegrationFilter,logoutFilter,authenticationProcessingFilter,basicProcessingFilter,securityContextHolderAwareRequestFilter,rememberMeProcessingFilter,anonymousProcessingFilter,exceptionTranslationFilter,filterInvocationInterceptor,switchUserProcessingFilter"/&gt;
  &lt;/security:filter-chain-map&gt;
&lt;/bean&gt;</pre>

    <p>&#23433;&#20840;&#21629;&#21517;&#31354;&#38388;&#37324;&#30340;<code class="literal">filter-chain-map</code>&#30340;&#35821;&#27861;&#65292;&#35753;&#20320;&#21487;&#20197;&#20351;&#29992;<code class="literal">filter-chain</code>&#23376;&#20803;&#32032;&#24207;&#21015;&#65292;&#20026;&#36807;&#28388;&#22120;&#38142;&#23450;&#20041;&#19968;&#20010;URL&#26144;&#23556;&#12290;
    &#23427;&#20204;&#20351;&#29992;<code class="literal">pattern</code>&#23646;&#24615;&#23450;&#20041;&#20102;&#19968;&#31995;&#21015; URL&#65292;&#20351;&#29992;<code class="literal">filters</code>&#23646;&#24615;&#23450;&#20041;&#20102;&#36807;&#28388;&#22120;&#38142;&#12290;
    &#36825;&#37324;&#38656;&#35201;&#37325;&#28857;&#27880;&#24847;&#30340;&#26159;&#65292;&#36807;&#28388;&#22120;&#31995;&#21015;&#20250;&#25353;&#29031;&#23450;&#20041;&#30340;&#39034;&#24207;&#25191;&#34892; - &#32780;&#19988;&#27599;&#20010;&#36807;&#28388;&#22120;&#65292;&#37117;&#19982;&#22312;application context&#20013;&#23450;&#20041;&#30340;&#20854;&#20182;bean&#30340;<code class="literal">id</code>&#30456;&#23545;&#24212;&#12290;
    &#25152;&#20197;&#65292;&#25105;&#20204;&#30475;&#21040;&#19968;&#20123;&#29305;&#23450;&#30340;bean&#20986;&#29616;&#22312;application context&#37324;&#65292;&#20182;&#20204;&#21487;&#33021;&#21483;&#20316;<code class="literal">httpSessionContextIntegrationFilter</code>&#65292;<code class="literal">logoutFilter</code>&#31561;&#31561;&#12290;
    &#36807;&#28388;&#22120;&#30340;&#39034;&#24207;&#65292;&#22312;&#21442;&#32771;&#25991;&#26723;&#30340;&#36807;&#28388;&#22120;&#31456;&#33410;&#35752;&#35770; - &#19981;&#36807;&#19978;&#38754;&#30340;&#20363;&#23376;&#27809;&#26377;&#38382;&#39064;&#12290;</p>

    <p>&#22312;&#25105;&#20204;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#20351;&#29992;&#20102;<code class="literal">AuthenticationProcessingFilter</code>&#65292;<code class="literal">BasicProcessingFilter</code>&#12290;
    &#20182;&#20204;&#26159;&#65292;&#21709;&#24212;&#22522;&#20110;&#34920;&#21333;&#35748;&#35777;&#21644;&#22522;&#26412;HTTP header&#35748;&#35777;&#30340;&#8220;&#35748;&#35777;&#26426;&#21046;&#8221;&#65288;&#25105;&#20204;&#22312;&#21442;&#32771;&#25991;&#26723;&#30340;&#21069;&#38754;&#37096;&#20998;&#35752;&#35770;&#36807;&#35748;&#35777;&#26426;&#21046;&#30340;&#35282;&#33394;&#65289;&#12290;
    &#22914;&#26524;&#20320;&#27809;&#26377;&#20351;&#29992;&#34920;&#21333;&#25110;&#22522;&#26412;&#35748;&#35777;&#65292;&#23601;&#19981;&#38656;&#35201;&#23450;&#20041;&#36825;&#20960;&#20010;bean&#12290;
    &#20320;&#24212;&#35813;&#20351;&#29992;&#65292;&#20320;&#24819;&#35201;&#30340;&#35748;&#35777;&#29615;&#22659;&#38656;&#35201;&#30340;&#36807;&#28388;&#22120;&#65292;&#27604;&#22914;<code class="literal">DigestProcessingFilter</code>&#25110;<code class="literal">CasProcessingFilter</code>&#12290;
    &#21442;&#32771;&#26377;&#20851;&#36825;&#37096;&#20998;&#21442;&#32771;&#25991;&#26723;&#30340;&#21333;&#29420;&#31456;&#33410;&#65292;&#23398;&#20064;&#22914;&#20309;&#37197;&#32622;&#27599;&#20010;&#35748;&#35777;&#26426;&#21046;&#12290;</p>

    <p>&#35753;&#25105;&#20204;&#22238;&#24518;&#19968;&#19979;&#65292;<code class="literal">HttpSessionContextIntegrationFilter</code>&#20445;&#23384;&#20102;&#22312;HTTP session&#35843;&#29992;&#20013;&#30340;<code class="literal">SecurityContext</code>&#20869;&#23481;&#12290;
    &#36825;&#24847;&#21619;&#30528;&#35748;&#35777;&#26426;&#21046;&#21482;&#22312;&#20027;&#20307;&#21021;&#22987;&#21270;&#23581;&#35797;&#35748;&#35777;&#30340;&#26102;&#20505;&#20351;&#29992;&#19968;&#27425;&#12290;
    &#21097;&#19979;&#30340;&#26102;&#38388;&#37324;&#65292;&#35748;&#35777;&#26426;&#21046;&#23601;&#24453;&#22312;&#37027;&#37324;&#65292;&#38745;&#38745;&#30340;&#35753;&#35831;&#27714;&#36890;&#36807;&#65292;&#36827;&#20837;&#36807;&#28388;&#22120;&#38142;&#30340;&#19979;&#19968;&#20010;&#36807;&#28388;&#22120;&#37324;&#12290;
    &#36825;&#26159;&#19968;&#20010;&#24456;&#29616;&#23454;&#30340;&#38656;&#27714;&#65292;&#35748;&#35777;&#36807;&#31243;&#24456;&#23569;&#38656;&#35201;&#22312;&#27599;&#20010;&#35843;&#29992;&#30340;&#26102;&#20505;&#36215;&#20316;&#29992;&#65288;BASIC&#35748;&#35777;&#26159;&#19968;&#20010;&#20363;&#22806;&#65289;&#65292;&#20294;&#26159;&#65292;&#22312;&#21021;&#22987;&#21270;&#35748;&#35777;&#23436;&#25104;&#20043;&#21518;&#65292;&#22914;&#26524;&#20027;&#20307;&#24080;&#21495;&#21457;&#29983;&#20102;&#21462;&#28040;&#25110;&#31105;&#29992;&#25110;&#20854;&#20182;&#25913;&#21464;&#65288;&#27604;&#22914;&#65292;&#22686;&#21152;&#25110;&#20943;&#23569;&#25480;&#26435;<code class="literal">GrantedAuthority[]</code>&#65289;&#65292;&#24590;&#20040;&#21150;&#65311;
    &#35753;&#25105;&#20204;&#30475;&#30475;&#29616;&#22312;&#26159;&#22914;&#20309;&#22788;&#29702;&#30340;&#12290;</p>

    <p>&#23433;&#20840;&#23545;&#35937;&#30340;&#20027;&#35201;&#35748;&#35777;&#25552;&#20379;&#22120;&#22312;&#21069;&#38754;&#20171;&#32461;&#36807;&#65292;&#26159;<code class="literal">AbstractSecurityInterceptor</code>&#12290;
    &#36825;&#20010;&#31867;&#38656;&#35201;&#35775;&#38382;<code class="literal">AuthenticationManager</code>&#12290;
    &#23427;&#20063;&#21487;&#20197;&#37197;&#32622;&#25104;&#65292;&#19968;&#20010;<code class="literal">Authentication</code>&#23545;&#35937;&#22312;&#27599;&#27425;&#23433;&#20840;&#23545;&#35937;&#35843;&#29992;&#30340;&#26102;&#20505;&#65292;&#26159;&#21542;&#38656;&#35201;&#37325;&#26032;&#35748;&#35777;&#12290;
    &#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#22914;&#26524;<code class="literal">Authentication.isAuthenticated()</code>&#36820;&#22238;true&#65292;&#23427;&#23601;&#21482;&#20174;<code class="literal">SecurityContextHolder</code>&#20013;&#21462;&#24471;&#24050;&#32463;&#35748;&#35777;&#30340;<code class="literal">Authentication</code>&#12290;
    &#36825;&#26679;&#25191;&#34892;&#24456;&#26377;&#25928;&#29575;&#65292;&#20294;&#26159;&#27809;&#21150;&#27861;&#22788;&#29702;&#21363;&#26102;&#35748;&#35777;&#30340;&#26377;&#25928;&#12290;
    &#23545;&#36825;&#31181;&#24773;&#20917;&#65292;&#20320;&#23601;&#35201;&#25226;<code class="literal">AbstractSecurityInterceptor.alwaysReauthenticate</code>&#23646;&#24615;&#35774;&#32622;&#25104;true&#12290;</p>

    <p>&#20320;&#21487;&#33021;&#20250;&#38382;&#33258;&#24049;&#65292;&#8220;<code class="literal">AuthenticationManager</code>&#26159;&#20160;&#20040;&#65311;&#8221;&#12290;
    &#25105;&#20204;&#20043;&#21069;&#36824;&#27809;&#26377;&#35762;&#36807;&#23427;&#65292;&#20294;&#26159;&#25105;&#20204;&#35752;&#35770;&#36807;<code class="literal">AuthenticationProvider</code>&#30340;&#27010;&#24565;&#12290;
    &#38750;&#24120;&#31616;&#21333;&#65292;&#19968;&#20010;<code class="interfacename">AuthenticationManager</code>&#29992;&#26469;&#20174;&#19968;&#20010;AuthenticationProvider&#38142;&#20256;&#36882;&#35831;&#27714;&#65292;&#33719;&#24471;&#21709;&#24212;&#12290;
    &#36825;&#36319;&#25105;&#20204;&#20197;&#21069;&#35752;&#35770;&#21040;&#30340;&#36807;&#28388;&#22120;&#38142;&#26377;&#28857;&#20799;&#30456;&#20284;&#65292;&#34429;&#28982;&#36825;&#37324;&#26377;&#24456;&#22810;&#21306;&#21035;&#12290;
    &#22312;Spring Security&#37324;&#65292;&#36825;&#37324;&#21482;&#26377;&#19968;&#20010;<code class="interfacename">AuthenticationManager</code>&#23454;&#29616;&#65292;&#25152;&#20197;&#35753;&#25105;&#20204;&#30475;&#30475;&#65292;&#23545;&#20110;&#36825;&#31456;&#20013;&#30340;&#20363;&#23376;&#65292;&#23427;&#26159;&#22914;&#20309;&#37197;&#32622;&#30340;&#65306;</p>

    <pre class="programlisting">&lt;bean id="authenticationManager"
        class="org.springframework.security.providers.ProviderManager"&gt;
&lt;property name="providers"&gt;
&lt;list&gt;
  &lt;ref local="daoAuthenticationProvider"/&gt;
  &lt;ref local="anonymousAuthenticationProvider"/&gt;
  &lt;ref local="rememberMeAuthenticationProvider"/&gt;
&lt;/list&gt;
&lt;/property&gt;
&lt;/bean&gt;</pre>

    <p>&#36824;&#35201;&#25552;&#21040;&#19968;&#28857;&#65292;&#20320;&#30340;&#35748;&#35777;&#26426;&#21046;&#65288;&#36890;&#24120;&#26159;&#36807;&#28388;&#22120;&#65289;&#20063;&#35201;&#27880;&#20837;<code class="literal">AuthenticationManager</code>&#30340;&#24341;&#29992;&#12290;
    &#25152;&#20197;<code class="literal">AbstractSecurityInterceptor</code>&#20316;&#20026;&#19968;&#20010;&#35748;&#35777;&#26426;&#21046;&#65292;&#20063;&#35201;&#20351;&#29992;&#19978;&#38754;&#30340;<code class="literal">ProviderManager</code>&#36718;&#35810;&#19968;&#31995;&#21015;&#30340;<code class="literal">AuthenticationProvider</code>&#12290;</p>

    <p>&#22312;&#25105;&#20204;&#20363;&#23376;&#37324;&#26377;&#19977;&#20010;&#25552;&#20379;&#22120;&#12290;
    &#20182;&#20204;&#25353;&#29031;&#39034;&#24207;&#36827;&#34892;&#25490;&#21015;&#65288;&#36825;&#37324;&#20351;&#29992;&#30340;&#26159;<code class="literal">List</code>&#32780;&#19981;&#26159;<code class="literal">Set</code>&#65289;&#65292;&#27599;&#20010;&#25552;&#20379;&#22120;&#37117;&#23581;&#35797;&#36827;&#34892;&#35748;&#35777;&#65292;&#25110;&#36339;&#36807;&#39564;&#35777;&#31616;&#21333;&#36820;&#22238;<code class="literal">null</code>&#12290;
    &#22914;&#26524;&#25152;&#26377;&#23454;&#29616;&#37117;&#36820;&#22238;null&#65292;<code class="literal">ProviderManager</code>&#23601;&#20250;&#25243;&#20986;&#19968;&#20010;&#23545;&#24212;&#30340;&#24322;&#24120;&#12290;
    &#22914;&#26524;&#20320;&#23545;&#38142;&#35013;&#25552;&#20379;&#22120;&#24863;&#20852;&#36259;&#65292;&#35831;&#21442;&#32771;<code class="literal">ProviderManager</code>&#30340;JavaDocs&#12290;</p>

    <p>&#36825;&#20123;&#25552;&#20379;&#22120;&#26377;&#26102;&#22312;&#19981;&#21516;&#35748;&#35777;&#26426;&#21046;&#20043;&#38388;&#26159;&#21487;&#20114;&#25442;&#30340;&#65292;&#20854;&#20182;&#26102;&#20505;&#65292;&#23427;&#20204;&#20381;&#36182;&#20110;&#29305;&#23450;&#30340;&#35748;&#35777;&#26426;&#21046;&#12290;
    &#27604;&#22914;<code class="literal">DaoAuthenticationProvider</code>&#21482;&#38656;&#35201;&#22522;&#20110;&#23383;&#31526;&#20018;&#30340;&#29992;&#25143;&#21517;&#21644;&#23494;&#30721;&#12290;
    &#22909;&#22810;&#35748;&#35777;&#26426;&#21046;&#20250;&#20135;&#29983;&#22522;&#20110;&#23383;&#31526;&#20018;&#30340;&#29992;&#25143;&#21517;&#21644;&#23494;&#30721;&#30340;&#38598;&#21512;&#65292;&#21253;&#25324;&#65288;&#20294;&#19981;&#38480;&#20110;&#65289;&#34920;&#21333;&#21644;&#22522;&#26412;&#39564;&#35777;&#12290;
    &#21516;&#26679;&#30340;&#65292;&#19968;&#20123;&#35748;&#35777;&#26426;&#21046;&#21019;&#24314;&#21482;&#33021;&#34987;&#23545;&#24212;<code class="literal">AuthenticationProvider</code>&#20351;&#29992;&#30340;&#35748;&#35777;&#35831;&#27714;&#23545;&#35937;&#12290;
    &#27604;&#22914;&#65292;&#19968;&#19968;&#23545;&#24212;&#30340;JA-SIG CAS&#65292;&#20182;&#20351;&#29992;&#26381;&#21153;&#31080;&#25454;&#20307;&#22411;&#65292;&#21482;&#33021;&#34987;<code class="literal">CasAuthenticationProvider</code>&#35748;&#35777;&#12290;
    &#21478;&#19968;&#20010;&#19968;&#19968;&#23545;&#24212;&#30340;&#20363;&#23376;&#26159;LDAP&#35748;&#35777;&#26426;&#21046;&#65292;&#23427;&#21482;&#20250;&#34987;<code class="literal">LdapAuthenticationProvider</code>&#22788;&#29702;&#12290;
    &#27599;&#20010;&#31867;&#29305;&#23450;&#20851;&#31995;&#30340;&#32454;&#33410;&#22312;JavaDocs&#37324;&#65292;&#36825;&#20010;&#21442;&#32771;&#25351;&#21335;&#30340;&#35748;&#35777;&#29305;&#23450;&#26041;&#24335;&#30340;&#31456;&#33410;&#37324;&#37117;&#26377;&#35814;&#32454;&#35828;&#26126;&#12290;
    &#20320;&#19981;&#38656;&#35201;&#29305;&#21035;&#27880;&#24847;&#36825;&#20123;&#23454;&#29616;&#32454;&#33410;&#65292;&#22240;&#20026;&#22914;&#26524;&#20320;&#24536;&#35760;&#27880;&#20876;&#23545;&#24212;&#30340;&#25552;&#20379;&#22120;&#65292;&#20320;&#23601;&#20250;&#22312;&#23581;&#35797;&#35748;&#35777;&#30340;&#26102;&#20505;&#25910;&#21040;&#19968;&#20010;<code class="literal">ProviderNotFoundException</code>&#12290;</p>

    <p>&#22312;&#27491;&#30830;&#37197;&#32622;&#23436;<code class="literal">FilterChainProxy</code>&#37324;&#30340;&#35748;&#35777;&#26426;&#21046;&#21518;&#65292;&#20063;&#30830;&#23450;&#23545;&#24212;&#30340;<code class="literal">AuthenticationProvider</code>&#27880;&#20876;&#21040;&#20102;<code class="literal">ProviderManager</code>&#20013;&#65292;&#20320;&#26368;&#21518;&#19968;&#27493;&#26159;&#37197;&#32622;&#19968;&#20010;<code class="literal">AuthenticationEntryPoint</code>&#12290;
    &#22238;&#24518;&#19968;&#19979;&#25105;&#20204;&#20197;&#21069;&#35752;&#35770;&#36807;&#30340;<code class="literal">ExceptionTranslationFilter</code>&#30340;&#35282;&#33394;&#65292;&#23427;&#26159;&#22312;&#35748;&#35777;&#24320;&#22987;&#30340;&#20351;&#29992;&#65292;&#29992;&#26469;&#22312;&#22522;&#20110;HTTP&#35831;&#27714;&#65292;&#36820;&#22238;&#19968;&#20010;HTTP&#22836;&#25110;HTTP&#37325;&#23450;&#21521;&#12290;
    &#32487;&#32493;&#25105;&#20204;&#20197;&#21069;&#30340;&#20363;&#23376;&#65306;</p>

    <pre class="programlisting">
&lt;bean id="exceptionTranslationFilter"
        class="org.springframework.security.ui.ExceptionTranslationFilter"&gt;
  &lt;property name="authenticationEntryPoint" ref="authenticationProcessingFilterEntryPoint"/&gt;
  &lt;property name="accessDeniedHandler"&gt;
    &lt;bean class="org.springframework.security.ui.AccessDeniedHandlerImpl"&gt;
      &lt;property name="errorPage" value="/accessDenied.jsp"/&gt;
    &lt;/bean&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="authenticationProcessingFilterEntryPoint"
        class="org.springframework.security.ui.webapp.AuthenticationProcessingFilterEntryPoint"&gt;
  &lt;property name="loginFormUrl" value="/login.jsp"/&gt;
  &lt;property name="forceHttps"&gt;&lt; value="false"/&gt;
&lt;/bean&gt;</pre>

    <p>&#27880;&#24847;<code class="literal">ExceptionTranslationFilter</code>&#38656;&#35201;&#20004;&#20010;&#21327;&#20316;&#32773;&#12290;
    &#31532;&#19968;&#20010;&#26159;<code class="literal">AccessDeniedHandlerImpl</code>&#65292;&#20351;&#29992;<code class="literal">RequestDispatcher</code>&#36716;&#21521;&#21040;&#26174;&#31034;&#29305;&#23450;&#35775;&#38382;&#25298;&#32477;&#38169;&#35823;&#39029;&#38754;&#12290;
    &#25105;&#20204;&#20351;&#29992;&#35831;&#27714;&#36716;&#21521;&#65292;&#36825;&#26679;<code class="literal">SecurityContextHolder</code>&#36824;&#33021;&#21253;&#21547;&#30528;&#20027;&#20307;&#30340;&#20449;&#24687;&#65292;&#36825;&#23545;&#21576;&#29616;&#32473;&#29992;&#25143;&#26159;&#24456;&#26377;&#29992;&#30340;&#65288;&#32769;&#29256;&#26412;&#20013;&#65292;&#25105;&#20204;&#35753;servlet&#23481;&#22120;&#22788;&#29702;403&#38169;&#35823;&#20449;&#24687;&#65292;&#36825;&#20250;&#20002;&#22833;&#24456;&#22810;&#26377;&#29992;&#30340;&#20869;&#23481;&#20449;&#24687;&#65289;&#12290;
    <code class="literal">AccessDeniedHandlerImpl</code>&#20063;&#20250;&#25226;HTTP header&#35774;&#32622;&#25104;403&#65292;&#36825;&#26159;&#19968;&#20010;&#27491;&#35268;&#30340;&#38169;&#35823;&#20195;&#30721;&#65292;&#25551;&#36848;&#25298;&#32477;&#35775;&#38382;&#12290;
    &#33267;&#20110;<code class="literal">AuthentionEntryPoint</code>&#65292;&#36825;&#37324;&#25105;&#20204;&#35774;&#32622;&#24403;&#19968;&#20010;&#26410;&#35748;&#35777;&#30340;&#20027;&#20307;&#23581;&#35797;&#25191;&#34892;&#19968;&#20010;&#23433;&#20840;&#25805;&#20316;&#26102;&#65292;&#20250;&#25191;&#34892;&#20160;&#20040;&#21160;&#20316;&#12290;
    &#22240;&#20026;&#22312;&#25105;&#20204;&#30340;&#20363;&#23376;&#37324;&#65292;&#25105;&#20204;&#23558;&#20351;&#29992;&#22522;&#20110;&#34920;&#21333;&#30340;&#35748;&#35777;&#65292;&#25105;&#20204;&#25351;&#23450;<code class="literal">AuthenticationProcessinFilterEntryPoint</code>&#21644;&#30331;&#24405;&#29992;&#39029;&#38754;&#30340;URL&#12290;
    &#20320;&#30340;&#31243;&#24207;&#36890;&#24120;&#21482;&#20250;&#26377;&#19968;&#20010;&#20837;&#21475;&#28857;&#65292;&#22823;&#22810;&#25968;&#30340;&#35748;&#35777;&#26041;&#27861;&#23450;&#20041;&#23427;&#20204;&#33258;&#24049;&#30340;<code class="literal">AuthenticationEntryPoint</code>&#12290;
    &#27599;&#20010;&#35748;&#35777;&#26041;&#24335;&#23545;&#24212;&#21738;&#20010;&#20837;&#21475;&#28857;&#65292;&#22312;&#21442;&#32771;&#25351;&#21335;&#30340;&#35748;&#35777;&#29305;&#23450;&#26041;&#24335;&#31456;&#33410;&#37324;&#35752;&#35770;&#12290;</p>
  </div>

  <div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="userdetails-and-associated-types"></a>8.2.&nbsp;UserDetails &#21644;&#30456;&#20851;&#31867;&#22411;</h2></div></div></div>


    <p>&#23601;&#20687;&#21442;&#32771;&#25351;&#21335;&#31532;&#19968;&#37096;&#20998;&#25552;&#21040;&#30340;&#65292;&#22823;&#22810;&#25968;&#35748;&#35777;&#25552;&#20379;&#22120;&#20351;&#29992;<code class="literal">UserDetails</code> &#21644;
    <code class="literal">UserDetailsService</code> &#25509;&#21475;&#12290;
    &#21518;&#19968;&#20010;&#25509;&#21475;&#21482;&#26377;&#19968;&#20010;&#21333;&#29420;&#30340;&#26041;&#27861;&#65306;</p>

    <pre class="programlisting">
  UserDetails loadUserByUsername(String username) throws UsernameNotFoundException, DataAccessException;
    </pre>

    <p>&#36820;&#22238;&#30340;<code class="literal">UserDetails</code>&#26159;&#19968;&#20010;&#25509;&#21475;&#65292;&#25552;&#20379;&#20102;getter&#26041;&#27861;&#65292;&#20445;&#38556;&#38750;&#31354;&#30340;&#22522;&#26412;&#35748;&#35777;&#20449;&#24687;&#65292;&#27604;&#22914;&#29992;&#25143;&#21517;&#65292;&#23494;&#30721;&#65292;&#25480;&#20104;&#30340;&#26435;&#38480;&#65292;&#21644;&#36825;&#20010;&#29992;&#25143;&#26159;&#21542;&#34987;&#31105;&#29992;&#20102;&#12290;
    &#22823;&#22810;&#25968;&#35748;&#35777;&#25552;&#20379;&#22120;&#20250;&#20351;&#29992;<code class="literal">UserDetailsService</code>&#65292;&#21363;&#20351;&#29992;&#25143;&#21517;&#21644;&#23494;&#30721;&#20854;&#23454;&#27809;&#26377;&#22312;&#35748;&#35777;&#36807;&#31243;&#20013;&#29992;&#21040;&#12290;
    &#36890;&#24120;&#65292;&#36825;&#31181;&#20379;&#24212;&#22120;&#20250;&#20351;&#29992;&#36820;&#22238;&#30340;<code class="literal">UserDetails</code>&#23545;&#35937;&#65292;&#21482;&#26159;&#20351;&#29992;&#20854;&#20013;&#30340;<code class="literal">GrantedAuthority[]</code>&#20449;&#24687;&#65292;&#22240;&#20026;&#19968;&#20123;&#31995;&#32479;&#65288;&#20687;LDAP&#25110;X509&#25110;CAS&#31561;&#31561;&#65289;&#24050;&#32463;&#23545;&#25972;&#25968;&#30340;&#26377;&#25928;&#24615;&#36827;&#34892;&#36807;&#39564;&#35777;&#12290;</p>

    <p>&#19968;&#20010;&#30001;Spring Security&#25552;&#20379;&#30340;<code class="literal">UserDetails</code>&#21333;&#29420;&#30340;&#20855;&#20307;&#23454;&#29616;&#65292;&#26159;<code class="literal">User</code>&#31867;&#12290;
    Spring Security&#29992;&#25143;&#23558;&#38656;&#35201;&#20915;&#23450;&#20160;&#20040;&#26102;&#20505;&#32534;&#20889;&#20182;&#20204;&#30340;<code class="literal">UserDetailsService</code>&#65292;&#36820;&#22238;&#20855;&#20307;&#30340;<code class="literal">UserDetails</code>&#31867;&#12290;
    &#22823;&#22810;&#25968;&#24773;&#20917;&#19979;<code class="literal">User</code>&#20250;&#30452;&#25509;&#20351;&#29992;&#65292;&#25110;&#34987;&#32487;&#25215;&#65292;&#34429;&#28982;&#29305;&#23450;&#30340;&#29615;&#22659;&#65288;&#27604;&#22914;ORM&#65289;&#21487;&#33021;&#38656;&#35201;&#29992;&#25143;&#26681;&#25454;&#33050;&#25163;&#26550;&#32534;&#20889;&#20182;&#20204;&#33258;&#24049;&#30340;<code class="literal">UserDetails</code>&#12290;
    &#36825;&#24182;&#19981;&#26159;&#19981;&#24120;&#35265;&#30340;&#24773;&#20917;&#65292;&#29992;&#25143;&#24212;&#35813;&#27627;&#19981;&#29369;&#35947;&#30340;&#36820;&#22238;&#20182;&#20204;&#27491;&#24120;&#30340;&#39046;&#22495;&#23545;&#35937;&#65292;&#23637;&#31034;&#31995;&#32479;&#30340;&#19968;&#20010;&#29992;&#25143;&#12290;
    &#23588;&#20854;&#26159;&#36890;&#24120;&#32473;<code class="literal">UserDetails</code>&#25552;&#20379;&#38468;&#21152;&#30340;&#20027;&#20307;&#30456;&#20851;&#30340;&#23646;&#24615;&#65288;&#27604;&#22914;&#20182;&#20204;&#30340;&#30005;&#35805;&#21495;&#30721;&#21644;&#37038;&#20214;&#22320;&#22336;&#65289;&#65292;&#36825;&#26679;&#20182;&#20204;&#21487;&#20197;&#24456;&#23481;&#26131;&#22312;web&#35270;&#22270;&#37324;&#20351;&#29992;&#12290;</p>

    <p> <code class="literal">UserDetailsService</code>&#26159;&#38750;&#24120;&#23481;&#26131;&#23454;&#29616;&#30340;&#65292;&#29992;&#25143;&#24212;&#35813;&#24456;&#23481;&#26131;&#20351;&#29992;&#20182;&#20204;&#33258;&#24049;&#36873;&#25321;&#25345;&#20037;&#21270;&#31574;&#30053;&#65292;&#33719;&#24471;&#35748;&#35777;&#20449;&#24687;&#12290;
    &#36825;&#37324;&#65292;Spring Security&#30830;&#23454;&#21253;&#21547;&#20102;&#24456;&#22810;&#26377;&#29992;&#30340;&#23454;&#29616;&#65292;&#25105;&#20204;&#20250;&#22312;&#19979;&#38754;&#30475;&#21040;&#12290;</p>

    <div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="in-memory-service"></a>8.2.1.&nbsp;&#20869;&#23384;&#37324;&#35748;&#35777;</h3></div></div></div>
      
      <p>&#34429;&#28982;&#24456;&#23481;&#26131;&#21019;&#24314;&#19968;&#20010;&#33258;&#23450;&#20041;&#30340;<code class="literal">UserDetailsService</code>&#23454;&#29616;&#65292;&#20174;&#36873;&#25321;&#30340;&#25345;&#20037;&#21270;&#24341;&#25806;&#37324;&#33719;&#24471;&#30830;&#20999;&#20449;&#24687;&#65292;&#19981;&#36807;&#24456;&#22810;&#24212;&#29992;&#19981;&#38656;&#35201;&#25630;&#24471;&#36825;&#20040;&#22797;&#26434;&#12290;
      &#29305;&#21035;&#26159;&#22312;&#20320;&#36827;&#34892;&#19968;&#20010;&#24555;&#36895;&#21407;&#22411;&#25110;&#32773;&#20165;&#20165;&#24320;&#22987;&#38598;&#25104;Spring Security&#30340;&#26102;&#20505;&#65292;&#24403;&#20320;&#19981;&#26159;&#30495;&#30340;&#38656;&#35201;&#22312;&#37197;&#32622;&#25968;&#25454;&#24211;&#25110;&#20889;<code class="literal">UserDetailsService</code>&#23454;&#29616;&#19978;&#38754;&#33457;&#36153;&#26102;&#38388;&#30340;&#26102;&#20505;&#12290;
      &#20026;&#20102;&#36825;&#31181;&#24773;&#20917;&#65292;&#19968;&#20010;&#31616;&#21333;&#30340;&#36873;&#25321;&#26159;&#20351;&#29992;&#23433;&#20840;<a href="">&#21629;&#21517;&#31354;&#38388;</a>&#37324;&#30340;<code class="literal">user-service</code>&#20803;&#32032;&#65292;&#65306;
</p><pre class="programlisting">
    &lt;user-service id="userDetailsService"&gt;
      &lt;user name="jimi" password="jimispassword" authorities="ROLE_USER, ROLE_ADMIN" /&gt;
      &lt;user name="bob" password="bobspassword" authorities="ROLE_USER" /&gt;
    &lt;/user-service&gt;
  
</pre><p>
        &#23427;&#20063;&#25903;&#25345;&#22806;&#37096;&#23646;&#24615;&#25991;&#20214;&#65306;
        </p><pre class="programlisting">
    &lt;user-service id="userDetailsService" properties="users.properties"/&gt;
  
        </pre><p>
        &#23646;&#24615;&#25991;&#20214;&#65292;&#24212;&#35813;&#21253;&#21547;&#19979;&#38754;&#26684;&#24335;&#30340;&#20869;&#23481;
</p><pre class="programlisting">
  username=password,grantedAuthority[,grantedAuthority][,enabled|disabled]
</pre><p>
        &#27604;&#22914;
</p><pre class="programlisting">
  jimi=jimispassword,ROLE_USER,ROLE_ADMIN,enabled
  bob=bobspassword,ROLE_USER,enabled
</pre><p>
      </p>
    </div>

    <div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-service"></a>8.2.2.&nbsp;JDBC&#35748;&#35777;</h3></div></div></div>
      
      <p>Spring Security&#20063;&#21253;&#21547;&#19968;&#20010;<code class="interfacename">UserDetailsService</code>&#21487;&#20197;&#20174;JDBC&#25968;&#25454;&#28304;&#37324;&#33719;&#24471;&#35748;&#35777;&#20449;&#24687;&#12290;
      &#20869;&#37096;&#20351;&#29992;&#20102;Spring JDBC&#65292;&#36991;&#20813;&#20102;&#20165;&#20165;&#20026;&#20102;&#20445;&#23384;&#29992;&#25143;&#20449;&#24687;&#32780;&#23454;&#29616;ORM&#23436;&#20840;&#21151;&#33021;&#30340;&#22797;&#26434;&#24615;&#12290;
      &#22914;&#26524;&#20320;&#30340;&#31243;&#24207;&#20351;&#29992;&#20102;ORM&#24037;&#20855;&#65292;&#20320;&#20272;&#35745;&#20250;&#21916;&#27426;&#33258;&#24049;&#20889;&#19968;&#20010;<code class="literal">UserDetailsService</code>&#26469;&#37325;&#29992;&#20320;&#24050;&#32463;&#20889;&#22909;&#30340;&#26144;&#23556;&#25991;&#20214;&#12290;
      &#22238;&#21040;<code class="literal">JdbcDaoImpl</code>&#65292;&#19968;&#20010;&#37197;&#32622;&#30340;&#20363;&#23376;&#22914;&#19979;&#25152;&#31034;&#65306;</p>

      <pre class="programlisting">

&lt;bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource"&gt;
  &lt;property name="driverClassName" value="org.hsqldb.jdbcDriver"/&gt;
  &lt;property name="url" value="jdbc:hsqldb:hsql://localhost:9001"/&gt;
  &lt;property name="username" value="sa"/&gt;
  &lt;property name="password" value=""/&gt;
&lt;/bean&gt;

&lt;bean id="userDetailsService" class="org.springframework.security.userdetails.jdbc.JdbcDaoImpl"&gt;
  &lt;property name="dataSource" ref="dataSource"/&gt;
&lt;/bean&gt;        </pre>

      <p>&#36890;&#36807;&#20462;&#25913;&#19978;&#38754;&#30340;<code class="literal">DriverManagerDataSource</code>&#65292;&#20320;&#21487;&#20351;&#29992;&#19981;&#21516;&#30340;&#20851;&#31995;&#22411;&#25968;&#25454;&#24211;&#31649;&#29702;&#31995;&#32479;&#12290;
      &#20320;&#20063;&#21487;&#20197;&#20351;&#29992;&#36890;&#24120;&#30340;Spring&#36873;&#39033;&#65292;&#20174;JNDI&#33719;&#24471;&#30340;&#20844;&#20849;&#25968;&#25454;&#28304;&#12290;
      </p>

      <div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="jdbc-default-schema"></a>8.2.2.1.&nbsp;&#40664;&#35748;&#29992;&#25143;&#25968;&#25454;&#24211;&#34920;&#32467;&#26500;</h4></div></div></div>
        
      <p>
      &#19981;&#35770;&#20160;&#20040;&#20160;&#20040;&#25968;&#25454;&#24211;&#65292;&#25110;&#32773;&#65292;&#19981;&#31649;<code class="literal">DataSource</code>&#26159;&#22914;&#20309;&#33719;&#24471;&#30340;&#65292;&#24517;&#39035;&#29992;&#21040;&#19968;&#20010;&#26631;&#20934;&#30340;&#34920;&#32467;&#26500;&#65292;&#34920;&#32467;&#26500;&#23450;&#20041;&#30340;&#20869;&#23481;&#23601;&#22312;&#36825;&#37324;&#12290;
      &#19968;&#20010;HSQL&#25968;&#25454;&#24211;&#30340;DDL&#20869;&#23481;&#24212;&#35813;&#20687;&#36825;&#26679;&#65306;
</p><pre class="programlisting">
  CREATE TABLE users (
  username VARCHAR(50) NOT NULL PRIMARY KEY,
  password VARCHAR(50) NOT NULL,
  enabled BIT NOT NULL
  );

  CREATE TABLE authorities (
  username VARCHAR(50) NOT NULL,
  authority VARCHAR(50) NOT NULL
  );

  ALTER TABLE authorities ADD CONSTRAINT fk_authorities_users foreign key (username) REFERENCES users(username);
</pre><p>
      </p>

      <p>&#22914;&#26524;&#40664;&#35748;&#30340;&#34920;&#32467;&#26500;&#19981;&#28385;&#36275;&#20320;&#30340;&#38656;&#35201;&#65292;<code class="literal">JdbcDaoImpl</code>&#25552;&#20379;&#20102;&#23646;&#24615;&#65292;&#21487;&#20197;&#33258;&#23450;&#20041;SQL&#35821;&#21477;&#12290;
      &#35831;&#36890;&#36807;JavaDocs&#26597;&#25214;&#35814;&#32454;&#20449;&#24687;&#65292;&#19981;&#36807;&#35831;&#27880;&#24847;&#65292;&#36825;&#20010;&#31867;&#19981;&#26159;&#20026;&#20102;&#22797;&#26434;&#30340;&#33258;&#23450;&#20041;&#23376;&#31867;&#35774;&#35745;&#30340;&#12290;
      &#22914;&#26524;&#20320;&#26377;&#19968;&#20010;&#22797;&#26434;&#30340;&#34920;&#32467;&#26500;&#25110;&#24819;&#35201;&#36820;&#22238;&#19968;&#20010;&#33258;&#23450;&#20041;<code class="literal">UserDetails</code>&#23454;&#29616;&#65292;&#20320;&#26368;&#22909;&#37325;&#20889;&#20320;&#33258;&#24049;&#30340;<code class="literal">UserDetailsService</code>&#12290;
      &#36825;&#20010;Spring Security&#25552;&#20379;&#30340;&#22522;&#26412;&#23454;&#29616;&#65292;&#26159;&#20026;&#20102;&#20856;&#22411;&#24773;&#20917;&#65292;&#32780;&#19981;&#26159;&#35206;&#30422;&#25152;&#26377;&#21487;&#33021;&#20986;&#29616;&#30340;&#38656;&#27714;&#12290;</p>
      </div>
    </div>
  </div>

  <div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="concurrent-sessions"></a>8.3.&nbsp;&#24182;&#34892;&#20250;&#35805;&#22788;&#29702;</h2></div></div></div>
    

    <p>Spring Security&#21487;&#20197;&#38480;&#21046;&#19968;&#20010;&#20027;&#20307;&#24182;&#34892;&#35748;&#35777;&#21040;&#21516;&#19968;&#31995;&#32479;&#30340;&#27425;&#25968;&#12290;
    &#24456;&#22810;ISV&#21033;&#29992;&#36825;&#28857;&#26469;&#21152;&#24378;&#25480;&#26435;&#20844;&#37324;&#65292;&#32593;&#31649;&#20063;&#21916;&#27426;&#36825;&#20010;&#21151;&#33021;&#65292;&#22240;&#20026;&#23427;&#21487;&#20197;&#38450;&#27490;&#20154;&#20204;&#20849;&#20139;&#30331;&#24405;&#21517;&#12290;
    &#20320;&#21487;&#20197;&#65292;&#27604;&#22914;&#65292;&#31105;&#27490;&#29992;&#25143;"Batman"&#20174;&#20004;&#20010;&#19981;&#21516;&#30340;&#20250;&#35805;&#30331;&#24405;&#21040;web&#24212;&#29992;&#37324;&#12290;</p>

    <p>&#35201;&#20351;&#29992;&#24182;&#34892;&#20250;&#35805;&#25903;&#25345;&#65292;&#20320;&#38656;&#35201;&#25226;&#19979;&#38754;&#20869;&#23481;&#28155;&#21152;&#21040;<code class="literal">web.xml</code>&#37324;&#65306;
      </p><pre class="programlisting">
&lt;listener&gt;
    &lt;listener-class&gt;org.springframework.security.ui.session.HttpSessionEventPublisher&lt;/listener-class&gt;
&lt;/listener&gt;
      </pre><p>
    </p>

    <p>&#21478;&#22806;&#65292;&#20320;&#38656;&#35201;&#25226;<code class="literal">org.springframework.security.concurrent.ConcurrentSessionFilter</code>&#28155;&#21152;&#21040;&#20320;&#30340;<code class="literal">FilterChainProxy</code>&#37324;&#12290;
    <code class="classname">ConcurrentSessionFilter</code>&#38656;&#35201;&#20004;&#20010;&#23646;&#24615;&#65292;<code class="literal">sessionRegistry</code>&#65292;&#36825;&#20010;&#36890;&#24120;&#25351;&#21521;&#19968;&#20010;<code class="literal">SessionRegistryImpl</code>&#23454;&#20363;&#65292;&#21644;<code class="literal">expiredUrl</code>&#65292;&#22312;session&#36807;&#26399;&#30340;&#26102;&#20505;&#23601;&#25351;&#21521;&#36825;&#20010;&#39029;&#38754;&#12290;</p>

    <p><code class="literal">web.xml</code>&#37324;&#30340;<code class="literal">HttpSessionEventPublisher</code>&#20250;&#22312;
    <code class="literal">HttpSession</code> &#21019;&#24314;&#25110;&#38144;&#27585;&#30340;&#26102;&#20505;&#65292;&#21457;&#36865;&#19968;&#20010;<code class="literal">ApplicationEvent</code>&#32473; Spring&#30340;
    <code class="literal">ApplicationContext</code>&#12290;
    &#36825;&#26159;&#20851;&#38190;&#65292;&#23427;&#35753;<code class="classname">SessionRegistryImpl</code> &#30693;&#36947;&#20160;&#20040;&#26102;&#20505;session&#32467;&#26463;&#20102;&#12290;</p>

    <p>&#20320;&#36824;&#38656;&#35201;&#35013;&#37197;
    <code class="classname">ConcurrentSessionControllerImpl</code> &#65292;&#28982;&#21518;&#20174;&#20320;&#30340; <code class="literal">ProviderManager</code> bean&#37324;&#24341;&#29992;&#23427;&#65306;</p>

    <p>
      </p><pre class="programlisting">
&lt;bean id="authenticationManager"
    class="org.springframework.security.providers.ProviderManager"&gt;
  &lt;property name="providers"&gt;
    &lt;!-- your providers go here --&gt;
  &lt;/property&gt;
  &lt;property name="sessionController" ref="concurrentSessionController"/&gt;
&lt;/bean&gt;

&lt;bean id="concurrentSessionController"
    class="org.springframework.security.concurrent.ConcurrentSessionControllerImpl"&gt;
  &lt;property name="maximumSessions" value="1"/&gt;
  &lt;property name="sessionRegistry"&gt;
    &lt;bean class="org.springframework.security.concurrent.SessionRegistryImpl"/&gt;
  &lt;property&gt;
&lt;/bean&gt;
</pre>
  </div>

  <div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="authentication-taglibs"></a>8.4.&nbsp;&#35748;&#35777;&#26631;&#31614;&#24211;</h2></div></div></div>
    

    <p><code class="literal">AuthenticationTag</code>&#21482;&#26159;&#29992;&#26469;&#25226;&#24403;&#21069;&#30340;<code class="literal">Authentication</code>&#23545;&#35937;&#30340;&#19968;&#20010;&#23646;&#24615;&#65292;&#36755;&#20986;&#21040;&#32593;&#39029;&#19978;&#12290;</p>

    <p>&#19979;&#38754;&#30340;JSP&#29255;&#27573;&#65292;&#23637;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992; <code class="literal">AuthenticationTag</code>&#65306;</p>

    <pre class="programlisting">&lt;security:authentication property="principal.username"/&gt;</pre>

    <p>&#36825;&#20010;&#26631;&#31614;&#20250;&#25226;&#20027;&#20307;&#30340;&#21517;&#31216;&#26174;&#31034;&#20986;&#26469;&#12290;
    &#36825;&#37324;&#25105;&#20204;&#20551;&#35774;<code class="literal">Authentication.getPrincipal()</code>&#26159;&#19968;&#20010;<code class="literal">UserDetails</code>&#23545;&#35937;&#65292;&#36890;&#24120;&#26159;&#30001;Spring Security&#30340;&#26631;&#20934;<code class="literal">AuthenticationProvider</code>&#23454;&#29616;&#30340;&#12290;</p>
  </div>
</div><div xmlns:fo="http://www.w3.org/1999/XSL/Format" class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="authentication.html" tppabs="http://www.family168.com/tutorial/springsecurity/html/authentication.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="springsecurity.html" tppabs="http://www.family168.com/tutorial/springsecurity/html/springsecurity.html">Home</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="dao-provider.html" tppabs="http://www.family168.com/tutorial/springsecurity/html/dao-provider.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Part&nbsp;III.&nbsp;&#35748;&#35777;&nbsp;</td><td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="javascript:if(confirm('http://www.springsource.com/  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://www.springsource.com/'" tppabs="http://www.springsource.com/" title="SpringSource">Sponsored by SpringSource
                                        </a></span></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;9.&nbsp;DAO&#35748;&#35777;&#25552;&#20379;&#22120;</td></tr></table></div></body></html><script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www./");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-2857097-3");pageTracker._initData();pageTracker._trackPageview();</script>