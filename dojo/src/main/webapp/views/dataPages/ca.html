<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;21.&nbsp;&#23481;&#22120;&#36866;&#37197;&#22120;&#35748;&#35777;</title><link rel="stylesheet" href="html.css" tppabs="http://www.family168.com/tutorial/springsecurity/html/css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"><link rel="start" href="springsecurity.html" title="Spring Security"><link rel="up" href="authentication.html" title="Part&nbsp;III.&nbsp;&#35748;&#35777;"><link rel="prev" href="runas.html" title="Chapter&nbsp;20.&nbsp;&#26367;&#25442;&#39564;&#35777;&#36523;&#20221;"><link rel="next" href="appendix-schema.html" title="Appendix&nbsp;A.&nbsp;&#23433;&#20840;&#25968;&#25454;&#24211;&#34920;&#32467;&#26500;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="background-color:white;border:none;height:73px;border:1px solid black;"><a style="border:none;" href="javascript:if(confirm('http://static.springframework.org/spring-ws/site/  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://static.springframework.org/spring-ws/site/'" tppabs="http://static.springframework.org/spring-ws/site/" title="The Spring Framework - Spring Web Services"><img style="border:none;" src="xdev-spring_logo.jpg" tppabs="http://www.family168.com/tutorial/springsecurity/html/images/xdev-spring_logo.jpg"></a><a style="border:none;" href="javascript:if(confirm('http://www.springsource.com/  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://www.springsource.com/'" tppabs="http://www.springsource.com/" title="SpringSource"><img style="border:none;position:absolute;padding-top:5px;right:42px;" src="s2-banner-rhs.png" tppabs="http://www.family168.com/tutorial/springsecurity/html/images/s2-banner-rhs.png"></a></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="ca"></a>&#23481;&#22120;&#36866;&#37197;&#22120;&#35748;&#35777;</h1></div></div></div>


  <div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ca-overview"></a>21.1.&nbsp;&#27010;&#36848;</h2></div></div></div>
    


    <p>&#38750;&#24120;&#26089;&#26399;&#29256;&#26412;&#30340;Spring Security&#20351;&#29992;&#23481;&#22120;&#36866;&#37197;&#22120;&#36827;&#34892;&#26368;&#32456;&#29992;&#25143;&#30340;&#35748;&#35777;&#12290;
    &#34429;&#28982;&#23427;&#36816;&#34892;&#33391;&#22909;&#65292;&#20294;&#26159;&#38656;&#35201;&#24456;&#22810;&#26102;&#38388;&#26469;&#25903;&#25345;&#19981;&#21516;&#30340;&#23481;&#22120;&#29256;&#26412;&#65292;&#23545;&#20110;&#24320;&#21457;&#32773;&#26469;&#35828;&#37197;&#32622;&#26102;&#38388;&#20063;&#22826;&#38271;&#20102;&#12290;
    &#22240;&#20026;&#36825;&#20010;&#21407;&#22240;&#65292;HTTP&#34920;&#21333;&#35748;&#35777;&#21644;HTTP&#22522;&#30784;&#35748;&#35777;&#26041;&#27861;&#25165;&#34987;&#24320;&#21457;&#20986;&#26469;&#65292;&#30452;&#21040;&#20170;&#22825;&#65292;&#34987;&#25512;&#33616;&#29992;&#22312;&#20960;&#20046;&#25152;&#26377;&#30340;&#31243;&#24207;&#20013;&#12290;</p>

    <p>&#23481;&#22120;&#36866;&#37197;&#22120;&#35753;Spring Security&#21487;&#20197;&#23558;&#20027;&#26426;&#30340;&#26368;&#32456;&#29992;&#25143;&#31243;&#24207;&#19982;&#23481;&#22120;&#30452;&#25509;&#38598;&#25104;&#12290;
    &#36825;&#31181;&#38598;&#21512;&#24847;&#21619;&#30528;&#65292;&#31243;&#24207;&#21487;&#20197;&#32487;&#32493;&#20351;&#29992;&#23481;&#26131;&#26412;&#36523;&#30340;&#35748;&#35777;&#21644;&#25480;&#26435;&#33021;&#21147;&#65288;&#27604;&#22914;<code class="literal">isUserInRole()</code>&#21644;&#22522;&#20110;&#34920;&#21333;&#25110;&#22522;&#26412;&#35748;&#35777;&#65289;&#65292;&#34429;&#28982;Spring Security&#25552;&#20379;&#21152;&#24378;&#30340;&#23433;&#20840;&#25318;&#25130;&#33021;&#21147;&#65288;&#24212;&#35813;&#27880;&#24847;&#21040;&#65292;Spring Security&#20063;&#20801;&#35768;&#26159;&#29992;<code class="literal">ContextHolderAwareRequestWrapper</code>&#21457;&#36865;<code class="literal">isUserInRole()</code>&#65292;&#21644;&#31616;&#21333;&#30340;servlet&#35268;&#33539;&#20860;&#23481;&#30340;&#26041;&#27861;&#65289;&#12290;</p>

    <p>&#19968;&#33324;&#36890;&#36807;&#36866;&#37197;&#22120;&#36827;&#34892;&#23481;&#22120;&#21644;Spring Security&#38598;&#25104;&#12290;
    &#36866;&#37197;&#22120;&#25552;&#20379;&#19968;&#20010;&#23481;&#22120;&#20860;&#23481;&#30340;&#29992;&#25143;&#35748;&#35777;&#25552;&#20379;&#22120;&#65292;&#38656;&#35201;&#36820;&#22238;&#23481;&#22120;&#20860;&#23481;&#30340;&#29992;&#25143;&#23545;&#35937;&#12290;</p>

    <p>&#36866;&#37197;&#22120;&#30001;&#23481;&#22120;&#23454;&#20363;&#21270;&#65292;&#24182;&#23450;&#20041;&#22312;&#23481;&#22120;&#29305;&#23450;&#30340;&#37197;&#32622;&#25991;&#20214;&#37324;&#12290;
    &#36866;&#37197;&#22120;&#23558;&#35835;&#21462;&#23450;&#20041;&#20102;&#26222;&#36890;&#30340;&#35748;&#35777;&#31649;&#29702;&#22120;&#35774;&#32622;&#30340;Spring&#30340;application context&#65292;&#23601;&#20687;&#21487;&#20197;&#29992;&#26469;&#35748;&#35777;&#35831;&#27714;&#30340;&#35748;&#35777;&#25552;&#20379;&#22120;&#19968;&#26679;&#12290;
    application context&#36890;&#24120;&#21483;&#20570;<code class="literal">acegisecurity.xml</code>&#65292;&#35201;&#25226;&#23427;&#25918;&#22312;&#23481;&#22120;&#25351;&#23450;&#30340;&#20301;&#32622;&#12290;</p>

    <p>Spring Security&#29616;&#22312;&#25903;&#25345;Jetty, Catalina (Tomcat), JBoss &#21644; Resin&#12290;
    &#20854;&#20182;&#23481;&#22120;&#30340;&#36866;&#37197;&#22120;&#20063;&#24456;&#23481;&#26131;&#32534;&#20889;&#12290;</p>
  </div>

  <div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ca-adapter"></a>21.2.&nbsp;&#36866;&#37197;&#22120;&#35748;&#35777;&#25552;&#20379;&#22120;</h2></div></div></div>


    <p>&#22987;&#32456;&#26159;&#36825;&#31181;&#24773;&#20917;&#65292;&#23481;&#22120;&#36866;&#37197;&#22120;&#29983;&#25104;&#30340;<code class="literal">Authentication</code>&#23545;&#35937;&#36824;&#26159;&#38656;&#35201;&#22312;<code class="literal">AbstractSecurityInterceptor</code>&#38656;&#35201;&#22788;&#29702;&#35831;&#27714;&#30340;&#26102;&#20505;&#34987;<code class="literal">AuthenticationManager</code>&#35748;&#35777;&#12290;
    <code class="literal">AuthenticationManager</code>&#38656;&#35201;&#30830;&#35748;&#36866;&#37197;&#22120;&#25552;&#20379;&#30340;<code class="literal">Authentication</code>&#23545;&#35937;&#26159;&#26377;&#25928;&#30340;&#65292;&#20063;&#30830;&#23454;&#34987;&#19968;&#20010;&#21487;&#20449;&#20219;&#30340;&#36866;&#37197;&#22120;&#35748;&#35777;&#36807;&#20102;&#12290;</p>

    <p>&#36866;&#37197;&#22120;&#21019;&#24314;&#20102; <code class="literal">Authentication</code> &#23545;&#35937;&#65292;&#23427;&#26159;&#19981;&#21464;&#30340;&#65292;&#23454;&#29616;&#20102;<code class="literal">AuthByAdapter</code>&#25509;&#21475;&#12290;
    &#36825;&#20123;&#23545;&#35937;&#20445;&#23384;&#20102;&#30001;&#36866;&#37197;&#22120;&#23450;&#20041;&#30340;key&#30340;&#25955;&#21015;&#30721;&#65292;&#12290;
    &#36825;&#20801;&#35768;<code class="literal">Authentication</code>&#23545;&#35937;&#34987;<code class="literal">AuthByAdapterProvider</code>&#39564;&#35777;&#12290;
    &#36825;&#20010;&#35748;&#35777;&#25552;&#20379;&#22120;&#23450;&#20041;&#22914;&#19979;&#65306;</p>

    <pre class="programlisting">&lt;bean id="authByAdapterProvider"
        class="org.springframework.security.adapters.AuthByAdapterProvider"&gt;
&lt;property name="key"&gt;&lt;value&gt;my_password&lt;/value&gt;&lt;/property&gt;
&lt;/bean&gt;       </pre>

    <p>&#36825;&#37324;&#30340;key&#24517;&#39035;&#19982;&#23450;&#20041;&#22312;&#23481;&#22120;&#29305;&#23450;&#37197;&#32622;&#25991;&#20214;&#65292;&#29992;&#26469;&#21551;&#21160;&#36866;&#37197;&#22120;&#30340;key&#30456;&#21516;&#12290;
    &#36825;&#20010;<code class="literal">AuthByAdapterProvider</code>&#33258;&#21160;&#33719;&#24471;&#20219;&#20309;&#26377;&#25928;&#30340;<code class="literal">AuthByAdapter</code>&#23454;&#29616;&#65292;&#28982;&#21518;&#36820;&#22238;&#26399;&#24453;&#30340;key&#30340;&#25955;&#21015;&#20540;&#12290;</p>

    <p>&#37325;&#30003;&#19968;&#19979;&#65292;&#36825;&#24847;&#21619;&#30528;&#36866;&#37197;&#22120;&#20250;&#22312;&#21021;&#22987;&#21270;&#35748;&#35777;&#30340;&#26102;&#20505;&#20351;&#29992;&#20379;&#24212;&#22120;&#65292;&#27604;&#22914;<code class="literal">DaoAuthenticationProvider</code>&#65292;&#36820;&#22238;&#19968;&#20010;&#21253;&#21547;key&#30340;&#25955;&#21015;&#20540;&#30340;<code class="literal">AuthByAdapter</code>&#23454;&#20363;&#65292;&#12290;
    &#28982;&#21518;&#65292;&#24403;&#24212;&#29992;&#31243;&#24207;&#35843;&#29992;&#23433;&#20840;&#25318;&#25130;&#22120;&#31649;&#29702;&#30340;&#36164;&#28304;&#26102;&#65292;<code class="literal">AuthByAdapter</code>&#23454;&#20363;&#65292;&#25918;&#22312;<code class="literal">SecurityContextHolder</code>&#37324;&#30340;<code class="literal">SecurityContext</code>&#65292;&#20250;&#34987;&#31243;&#24207;&#30340;<code class="literal">AuthByAdapterProvider</code>&#27979;&#35797;&#21040;&#12290;
    &#36825;&#37324;&#19981;&#38656;&#35201;&#38468;&#21152;&#35748;&#35777;&#20379;&#24212;&#22120;&#65292;&#27604;&#22914;&#25918;&#21040;&#24212;&#29992;&#31243;&#24207;&#29305;&#23450;&#30340;application context&#37324;&#30340;<code class="literal">DaoAuthenticationProvider</code>&#65292;&#36825;&#26159;&#21807;&#19968;&#30340;<code class="literal">Authentication</code>&#23545;&#35937;&#31867;&#22411;&#65292;&#20250;&#34987;&#20174;&#23481;&#22120;&#36866;&#37197;&#22120;&#37324;&#30340;&#31243;&#24207;&#29992;&#21040;&#30340;&#12290;</p>

    <p>Classloader&#38382;&#39064;&#24120;&#24120;&#22256;&#25200;&#30528;&#23481;&#22120;&#65292;&#20197;&#21518;&#20250;&#25551;&#36848;&#23481;&#22120;&#36866;&#37197;&#22120;&#30340;&#29992;&#27861;&#12290;
    &#27599;&#20010;&#23481;&#22120;&#35201;&#27714;&#19968;&#20010;&#29305;&#21035;&#25351;&#23450;&#30340;&#37197;&#32622;&#12290;
    &#23433;&#35013;&#25945;&#31243;&#25552;&#20379;&#22312;&#19979;&#38754;&#12290;
    &#19968;&#26086;&#23433;&#35013;&#22909;&#65292;&#35831;&#33457;&#28857;&#20799;&#26102;&#38388;&#23581;&#35797;&#19968;&#19979;&#20363;&#23376;&#65292;&#35753;&#20320;&#23545;&#23481;&#22120;&#36866;&#37197;&#22120;&#30340;&#37197;&#32622;&#26377;&#26356;&#22810;&#30340;&#20102;&#35299;&#12290;</p>

    <p>&#22312;&#20351;&#29992;&#23481;&#22120;&#36866;&#37197;&#22120;&#21644;<code class="literal">DaoAuthenticationProvider</code>&#30340;&#26102;&#20505;&#65292;&#35201;&#30830;&#20445;&#23558;<code class="literal">forcePrincipalAsString</code>&#23646;&#24615;&#35774;&#32622;&#25104;<code class="literal">true</code>&#12290;</p>
  </div>

  <div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ca-jetty"></a>21.3.&nbsp;Jetty</h2></div></div></div>


    <p>&#20197;&#19979;&#20195;&#30721;&#65292;&#22312;Jetty 4.2.18&#19979;&#36890;&#36807;&#27979;&#35797;&#12290;</p>

    <p><code class="literal">$JETTY_HOME</code>&#20195;&#34920;&#20320;Jetty&#23433;&#35013;&#30340;&#26681;&#30446;&#24405;&#12290;</p>

    <p>&#32534;&#36753; <code class="literal">$JETTY_HOME/etc/jetty.xml</code> &#25991;&#20214;&#65292;&#22312; <code class="literal">&lt;Configure class&gt;</code> &#37096;&#20998;&#28155;&#21152;&#19968;&#20010;&#26032;&#30340; <code class="literal">addRealm</code> &#35843;&#29992;&#65306;</p>

    <pre class="programlisting">
&lt;Call name="addRealm"&gt;
&lt;Arg&gt;
  &lt;New class="org.springframework.security.adapters.jetty.JettySpringSecurityUserRealm"&gt;
    &lt;Arg&gt;Spring Powered Realm&lt;/Arg&gt;
    &lt;Arg&gt;my_password&lt;/Arg&gt;
    &lt;Arg&gt;etc/acegisecurity.xml&lt;/Arg&gt;
  &lt;/New&gt;
&lt;/Arg&gt;
&lt;/Call&gt;

    </pre>

    <p>&#25226; <code class="literal">acegisecurity.xml</code> &#22797;&#21046;&#21040;
    <code class="literal">$JETTY_HOME/etc</code>&#30446;&#24405;&#19979;&#12290;</p>

    <p>&#25226;&#19979;&#38754;&#30340;&#25991;&#20214;&#22797;&#21046;&#21040;
    <code class="literal">$JETTY_HOME/ext</code>&#30446;&#24405;&#19979;&#65306;</p><div class="itemizedlist"><ul type="disc"><li>
          <p><code class="literal">aopalliance.jar</code></p>
        </li><li>
          <p><code class="literal">commons-logging.jar</code></p>
        </li><li>
          <p><code class="literal">spring.jar</code></p>
        </li><li>
          <p><code class="literal">acegi-security-jetty-XX.jar</code></p>
        </li><li>
          <p><code class="literal">commons-codec.jar</code></p>
        </li><li>
          <p><code class="literal">burlap.jar</code></p>
        </li><li>
          <p><code class="literal">hessian.jar</code></p>
        </li></ul></div>

    <p>&#19978;&#38754;&#37027;&#20123;JAR&#25991;&#20214;&#65288;&#25110;&#32773;&#26159;<code class="literal">acegi-security-XX.jar</code>&#65289;&#37117;&#19981;&#33021;&#25918;&#22312;&#20320;&#31243;&#24207;&#30340;<code class="literal">WEB-INF/lib</code>&#30446;&#24405;&#19979;&#12290;
    &#20320;&#30340;<code class="literal">web.xml</code>&#37324;&#35774;&#32622;&#30340;realm&#21517;&#23383;&#26159;&#19982;Jetty&#23545;&#24212;&#30340;&#12290;
    <code class="literal">web.xml</code>&#24517;&#39035;&#20351;&#29992;&#19982;&#20320;&#30340;<code class="literal">jetty.xml</code>&#37324;&#30456;&#21516;&#30340;<code class="literal">&lt;realm-name&gt;</code>&#65288;&#20687;&#19978;&#38754;&#30340;&#20363;&#23376;&#37324;&#65292;"Spring Powered Realm"&#65289;&#12290;</p>
  </div>

  <div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ca-jboss"></a>21.4.&nbsp;JBoss</h2></div></div></div>


    <p>&#19979;&#38754;&#30340;&#20195;&#30721;&#22312;JBoss 3.2.6&#19979;&#36890;&#36807;&#20102;&#27979;&#35797;&#12290;</p>

    <p><code class="literal">$JBOSS_HOME</code>&#20195;&#34920;&#20320;JBoss&#23433;&#35013;&#30340;&#26681;&#30446;&#24405;&#12290;</p>

    <p>&#26377;&#20004;&#20010;&#19981;&#21516;&#26041;&#27861;&#65292;&#25226;spring&#29615;&#22659;&#38598;&#25104;&#21040;Jboss&#37324;&#12290;</p>

    <p>&#31532;&#19968;&#31181;&#26041;&#27861;&#26159;&#65292;&#20462;&#25913;&#20320;&#30340;
    <code class="literal">$JBOSS_HOME/server/your_config/conf/login-config.xml</code>
    &#25991;&#20214;&#65292;&#36825;&#26679;&#23427;&#23601;&#22312;<code class="literal">&lt;Policy&gt;</code>&#37096;&#20998;&#21253;&#21547;&#20102;&#26032;&#30340;&#20837;&#21475;&#65306;</p>

    <pre class="programlisting">
&lt;application-policy name = "SpringPoweredRealm"&gt;
&lt;authentication&gt;
  &lt;login-module code = "org.springframework.security.adapters.jboss.JbossSpringSecurityLoginModule"
        flag = "required"&gt;
    &lt;module-option name = "appContextLocation"&gt;acegisecurity.xml&lt;/module-option&gt;
    &lt;module-option name = "key"&gt;my_password&lt;/module-option&gt;
 &lt;/login-module&gt;
&lt;/authentication&gt;
&lt;/application-policy&gt;

    </pre>

    <p>&#25226; <code class="literal">acegisecurity.xml</code> &#22797;&#21046;&#21040;
    <code class="literal">$JBOSS_HOME/server/your_config/conf</code>&#30446;&#24405;&#19979;&#12290;</p>

    <p>&#22312;&#37197;&#32622;&#25991;&#20214; <code class="literal">acegisecurity.xml</code>&#37324;&#21253;&#21547;&#20102;spring&#29615;&#22659;&#30340;&#23450;&#20041;&#65292;&#21253;&#21547;&#20102;&#25152;&#26377;&#35748;&#35777;&#31649;&#29702;&#30340;bean&#12290;
    &#25105;&#20204;&#24517;&#39035;&#27880;&#24847;&#65292;<code class="literal">SecurityContext</code>&#20250;&#22312;&#27599;&#27425;&#35831;&#27714;&#26102;&#34987;&#21019;&#24314;&#38144;&#27585;&#65292;&#25152;&#20197;&#30331;&#24405;&#25805;&#20316;&#20250;&#36896;&#25104;&#24456;&#22823;&#30340;&#36164;&#28304;&#28040;&#32791;&#12290;
    &#21487;&#36873;&#30340;&#31532;&#20108;&#20010;&#26041;&#27861;&#36890;&#36807;<code class="literal">org.springframework.beans.factory.access.SingletonBeanFactoryLocator</code>&#20351;&#29992;Spring&#21333;&#20363;&#12290;
    &#38656;&#35201;&#30340;&#37197;&#32622;&#26041;&#27861;&#22914;&#19979;&#65306;</p>

    <pre class="programlisting">
&lt;application-policy name = "SpringPoweredRealm"&gt;
&lt;authentication&gt;
  &lt;login-module code = "org.springframework.security.adapters.jboss.JbossSpringSecurityLoginModule"
        flag = "required"&gt;
    &lt;module-option name = "singletonId"&gt;springRealm&lt;/module-option&gt;
    &lt;module-option name = "key"&gt;my_password&lt;/module-option&gt;
    &lt;module-option name = "authenticationManager"&gt;authenticationManager&lt;/module-option&gt;
 &lt;/login-module&gt;
&lt;/authentication&gt;
&lt;/application-policy&gt;

    </pre>

    <p>&#19978;&#38754;&#30340;&#20195;&#30721;&#29255;&#27573;&#65292;
    <code class="literal">authenticationManager</code>&#26159;&#19968;&#20010;&#21161;&#25163;&#23646;&#24615;&#65292;&#23450;&#20041;&#25104;&#26399;&#26395;&#30340;<code class="literal">AuthenticationManager</code>&#30340;&#21517;&#23383;&#65292;&#22312;IoC&#23481;&#22120;&#37324;&#26377;&#22810;&#20010;&#23450;&#20041;&#30340;&#26102;&#20505;&#21487;&#20197;&#29992;&#21040;&#12290;
    &#36825;&#20010;<code class="literal">singletonId</code>&#23646;&#24615;&#24341;&#29992;&#20102;&#23450;&#20041;&#22312;<code class="literal">beanRefFactory.xml</code>&#20013;&#30340;&#19968;&#20010;bean&#12290;
    &#36825;&#20010;&#25991;&#20214;&#38656;&#35201;&#25918;&#22312;JBoss&#30340;classpath&#20013;&#65292;&#21253;&#25324;<code class="literal">$JBOSS_HOME/server/your_config/conf</code>&#12290;
    &#36825;&#20010;<code class="literal">beanRefFactory.xml</code>&#21253;&#21547;&#20102;&#19979;&#38754;&#30340;&#22768;&#26126;&#65306;</p>

    <pre class="programlisting">
&lt;beans&gt;
&lt;bean id="springRealm" singleton="true" lazy-init="true" class="org.springframework.context.support.ClassPathXmlApplicationContext"&gt;
&lt;constructor-arg&gt;
  &lt;list&gt;
    &lt;value&gt;acegisecurity.xml&lt;/value&gt;
  &lt;/list&gt;
&lt;/constructor-arg&gt;
&lt;/bean&gt;
&lt;/beans&gt;

    </pre>

    <p>&#26368;&#21518;&#65292;&#26080;&#35770;&#20351;&#29992;&#20102;&#21738;&#31181;&#37197;&#32622;&#26041;&#27861;&#65292;&#20320;&#38656;&#35201;&#25226;&#19979;&#38754;&#30340;&#25991;&#20214;&#22797;&#21046;&#21040;
    <code class="literal">$JBOSS_HOME/server/your_config/lib</code>&#30446;&#24405;&#19979;&#65306;</p><div class="itemizedlist"><ul type="disc"><li>
          <p><code class="literal">aopalliance.jar</code></p>
        </li><li>
          <p><code class="literal">spring.jar</code></p>
        </li><li>
          <p><code class="literal">acegi-security-jboss-XX.jar</code></p>
        </li><li>
          <p><code class="literal">commons-codec.jar</code></p>
        </li><li>
          <p><code class="literal">burlap.jar</code></p>
        </li><li>
          <p><code class="literal">hessian.jar</code></p>
        </li></ul></div>

    <p>&#19978;&#38754;&#37027;&#20123;JAR&#25991;&#20214;&#65288;&#25110;&#32773;&#26159;<code class="literal">acegi-security-XX.jar</code>&#65289;&#37117;&#19981;&#33021;&#25918;&#22312;&#20320;&#31243;&#24207;&#30340;<code class="literal">WEB-INF/lib</code>&#30446;&#24405;&#19979;&#12290;
    &#20320;&#30340;<code class="literal">web.xml</code>&#37324;&#35774;&#32622;&#30340;realm&#21517;&#23383;&#26159;&#19982;JBoss&#23545;&#24212;&#30340;&#12290;
    &#28982;&#32780;&#65292;&#20320;web&#24212;&#29992;&#30340;<code class="literal">WEB-INF/jboss-web.xml</code>&#37324;&#30340;<code class="literal">&lt;security-domain&gt;</code>&#24212;&#35813;&#19982;&#20320;&#30340;<code class="literal">login-config.xml</code>&#20013;&#30340;&#20869;&#23481;&#19968;&#26679;&#12290;
    &#27604;&#22914;&#65292;&#20320;&#30340;<code class="literal">jboss-web.xml</code>&#30475;&#36215;&#26469;&#24212;&#35813;&#26159;&#36825;&#26679;&#65306;</p>
  </div>

  <div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ca-resin"></a>21.5.&nbsp;Resin</h2></div></div></div>


    <p>&#19979;&#38754;&#30340;&#20195;&#30721;&#22312;Resin 3.0.6&#19979;&#36890;&#36807;&#27979;&#35797;&#12290;</p>

    <p><code class="literal">$RESIN_HOME</code>&#20195;&#34920;&#20320;Resin&#23433;&#35013;&#30340;&#26681;&#30446;&#24405;&#12290;</p>

    <p>Resin&#25552;&#20379;&#20102;&#22909;&#20960;&#31181;&#26041;&#27861;&#23454;&#29616;&#23481;&#22120;&#36866;&#37197;&#22120;&#12290;
    &#22312;&#19979;&#38754;&#30340;&#25945;&#31243;&#37324;&#65292;&#25105;&#20204;&#20351;&#29992;&#20102;&#23613;&#37327;&#19982;&#20854;&#20182;&#23481;&#22120;&#36866;&#37197;&#22120;&#19968;&#33268;&#30340;&#37197;&#32622;&#12290;
    &#36825;&#20250;&#35753;Resin&#29992;&#25143;&#26356;&#23481;&#26131;&#21457;&#24067;&#21516;&#26679;&#30340;&#31243;&#24207;&#65292;&#30830;&#20445;&#37197;&#32622;&#27491;&#30830;&#12290;
    &#24320;&#21457;&#32773;&#23545;Resin&#24863;&#21040;&#33298;&#26381;&#65292;&#33258;&#28982;&#21487;&#20197;&#20351;&#29992;&#23427;&#30340;&#26041;&#27861;&#65292;&#25171;&#21253;JAR&#21516;web&#31243;&#24207;&#33258;&#24049;&#65292;&#21644;/&#25110;&#25903;&#25345;&#21333;&#28857;&#30331;&#24405;&#12290;</p>

    <p>&#25226;&#19979;&#38754;&#30340;&#25991;&#20214;&#22797;&#21046;&#21040;
    <code class="literal">$RESIN_HOME/lib</code>&#30446;&#24405;&#19979;&#65306;</p><div class="itemizedlist"><ul type="disc"><li>
          <p><code class="literal">aopalliance.jar</code></p>
        </li><li>
          <p><code class="literal">commons-logging.jar</code></p>
        </li><li>
          <p><code class="literal">spring.jar</code></p>
        </li><li>
          <p><code class="literal">acegi-security-resin-XX.jar</code></p>
        </li><li>
          <p><code class="literal">commons-codec.jar</code></p>
        </li><li>
          <p><code class="literal">burlap.jar</code></p>
        </li><li>
          <p><code class="literal">hessian.jar</code></p>
        </li></ul></div>

    <p>&#19982;&#20854;&#20182;&#23481;&#22120;&#36866;&#37197;&#22120;&#20351;&#29992;&#30340;&#65292;&#23481;&#22120;&#33539;&#22260;&#30340; <code class="literal">acegisecurity.xml</code>&#25991;&#20214;&#19981;&#21516;&#65292;&#27599;&#20010;Resin web&#31243;&#24207;&#20250;&#21253;&#21547;&#33258;&#24049;&#30340;<code class="literal">WEB-INF/resin-acegisecurity.xml</code>&#25991;&#20214;&#12290;
    &#27599;&#20010;web&#24212;&#29992;&#20250;&#21253;&#21547;&#19968;&#20010;<code class="literal">resin-web.xml</code>&#25991;&#20214;&#65292;Resin&#29992;&#23427;&#26469;&#21551;&#21160;&#23481;&#22120;&#36866;&#37197;&#22120;&#65306;</p>

    <pre class="programlisting">
&lt;web-app&gt;
&lt;authenticator&gt;
&lt;type&gt;org.springframework.security.adapters.resin.ResinAcegiAuthenticator&lt;/type&gt;
&lt;init&gt;
  &lt;app-context-location&gt;WEB-INF/resin-acegisecurity.xml&lt;/app-context-location&gt;
  &lt;key&gt;my_password&lt;/key&gt;
&lt;/init&gt;
&lt;/authenticator&gt;
&lt;/web-app&gt;

    </pre>

    <p>&#20687;&#19978;&#38754;&#25552;&#20379;&#30340;&#22522;&#26412;&#37197;&#32622;&#37027;&#26679;&#65292;&#19978;&#38754;&#37027;&#20123;JAR&#25991;&#20214;&#65288;&#25110;&#32773;&#26159;<code class="literal">acegi-security-XX.jar</code>&#65289;&#37117;&#19981;&#33021;&#25918;&#22312;&#20320;&#31243;&#24207;&#30340;<code class="literal">WEB-INF/lib</code>&#30446;&#24405;&#19979;&#12290;
    &#20320;&#30340;<code class="literal">web.xml</code>&#37324;&#35774;&#32622;&#30340;realm&#21517;&#23383;&#26159;&#19982;Resin&#26080;&#20851;&#30340;&#65292;&#35748;&#35777;&#30340;&#31867;&#26681;&#25454;<code class="literal">&lt;authenticator&gt;</code>&#35774;&#32622;&#30340;&#12290;</p>
  </div>

  <div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ca-tomcat"></a>21.6.&nbsp;Tomcat</h2></div></div></div>


    <p>&#19979;&#38754;&#30340;&#20195;&#30721;&#22312;Jakarta Tomcat 4.1.30 &#21644; 5.0.19&#36890;&#36807;&#30340;&#20102;&#27979;&#35797;&#12290;</p>

    <p><code class="literal">$CATALINA_HOME</code>&#20195;&#34920;&#20320;&#30340; Catalina (Tomcat) &#23433;&#35013;&#26681;&#30446;&#24405;&#12290;</p>

    <p>&#32534;&#36753;&#20320;&#30340; <code class="literal">$CATALINA_HOME/conf/server.xml</code> &#25991;&#20214;&#65292;&#35753; <code class="literal">&lt;Engine&gt;</code> &#37096;&#20998;&#21482;&#21253;&#21547;&#19968;&#20010;&#27963;&#21160;&#30340; <code class="literal">&lt;Realm&gt;</code> &#20837;&#21475;&#12290;&#19968;&#20010; realm&#20837;&#21475;&#30340;&#20363;&#23376;&#22914;&#19979;&#65306;</p>

    <pre class="programlisting">      &lt;Realm
        className="org.springframework.security.adapters.catalina.CatalinaSpringSecurityUserRealm"
        appContextLocation="conf/acegisecurity.xml"
         key="my_password" /&gt;</pre>

    <p>&#30830;&#35748;&#20174;&#20320;&#30340; <code class="literal">&lt;Engine&gt;</code>&#37096;&#20998;&#21024;&#38500;&#20102;&#20854;&#20182;&#30340; <code class="literal">&lt;Realm&gt;</code> &#20837;&#21475;&#12290;</p>

    <p>&#25226; <code class="literal">acegisecurity.xml</code> &#22797;&#21046;&#21040;<code class="literal">$CATALINA_HOME/conf</code>&#30446;&#24405;&#19979;&#12290;</p>

    <p>&#25226; <code class="literal">spring-security-catalina-XX.jar</code> &#22797;&#21046;&#21040;<code class="literal">$CATALINA_HOME/server/lib</code> &#30446;&#24405;&#19979;&#12290;</p>

    <p>&#21543;&#19979;&#38754;&#30340;&#25991;&#20214;&#22797;&#21046;&#21040;
    <code class="literal">$CATALINA_HOME/common/lib</code>&#30446;&#24405;&#19979;&#65306;</p>

    <div class="itemizedlist"><ul type="disc"><li>
        <p><code class="literal">aopalliance.jar</code></p>
      </li><li>
        <p><code class="literal">spring.jar</code></p>
      </li><li>
        <p><code class="literal">commons-codec.jar</code></p>
      </li><li>
        <p><code class="literal">burlap.jar</code></p>
      </li><li>
        <p><code class="literal">hessian.jar</code></p>
      </li></ul></div>

    <p>&#19978;&#38754;&#37027;&#20123;JAR&#25991;&#20214;&#65288;&#25110;&#32773;&#26159;<code class="literal">acegi-security-XX.jar</code>&#65289;&#37117;&#19981;&#33021;&#25918;&#22312;&#20320;&#31243;&#24207;&#30340;<code class="literal">WEB-INF/lib</code>&#30446;&#24405;&#19979;&#12290;
    &#20320;&#30340;<code class="literal">web.xml</code>&#37324;&#35774;&#32622;&#30340;realm&#21517;&#23383;&#26159;&#19982;Catalina&#26080;&#20851;&#30340;&#12290;</p>

    <p>&#25105;&#20204;&#25910;&#21040;&#20102;&#22312;Mac OS X&#19979;&#20351;&#29992;&#36825;&#20010;&#23481;&#22120;&#36866;&#37197;&#22120;&#30340;&#38382;&#39064;&#25253;&#21578;&#12290;&#38656;&#35201;&#20351;&#29992;&#19979;&#38754;&#30340;&#33050;&#26412;&#65306;</p>

    <pre class="programlisting">#!/bin/sh
export CATALINA_HOME="/Library/Tomcat"
export JAVA_HOME="/Library/Java/Home"
cd /
$CATALINA_HOME/bin/startup.sh</pre>

    <p>&#26368;&#21518;&#65292;&#37325;&#21551;tomcat&#12290;</p>
  </div>
</div><div xmlns:fo="http://www.w3.org/1999/XSL/Format" class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="runas.html" tppabs="http://www.family168.com/tutorial/springsecurity/html/runas.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="springsecurity.html" tppabs="http://www.family168.com/tutorial/springsecurity/html/springsecurity.html">Home</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="appendix-schema.html" tppabs="http://www.family168.com/tutorial/springsecurity/html/appendix-schema.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;20.&nbsp;&#26367;&#25442;&#39564;&#35777;&#36523;&#20221;&nbsp;</td><td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="javascript:if(confirm('http://www.springsource.com/  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://www.springsource.com/'" tppabs="http://www.springsource.com/" title="SpringSource">Sponsored by SpringSource
                                        </a></span></td><td width="40%" align="right" valign="top">&nbsp;Appendix&nbsp;A.&nbsp;&#23433;&#20840;&#25968;&#25454;&#24211;&#34920;&#32467;&#26500;</td></tr></table></div></body></html><script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www./");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-2857097-3");pageTracker._initData();pageTracker._trackPageview();</script>